# 論理回路プレイグラウンド - 機能テストケース完全版

## 現在の実装の問題点と必要なテストケース

### 1. ゲート端子の問題

#### 1.1 AND/ORゲートの複数入力端子
**問題**: 現在の実装では入力端子が1つしかない（line 236-253）
```javascript
// 現在: 1つの入力端子のみ
{gate.type !== 'INPUT' && (
  <circle cx={gate.x - 35} cy={gate.y} r="5" />
)}
```

**必要なテストケース**:
- [ ] ANDゲートは最低2つの入力端子を持つ
- [ ] ORゲートは最低2つの入力端子を持つ
- [ ] 入力端子は垂直方向に配置される
- [ ] 3つ目の入力を追加できる（動的端子追加）
- [ ] 未使用の入力端子の扱い（デフォルト値）
- [ ] 入力端子の位置計算が正しい

#### 1.2 複数出力への対応
**問題**: 1つの出力から複数の入力への分岐（ファンアウト）の実装が不明確

**必要なテストケース**:
- [ ] 1つの出力から複数のゲートへ接続できる
- [ ] 分岐した信号が全て同じ値を持つ
- [ ] 分岐数に制限がない
- [ ] 分岐の視覚的表現が適切

### 2. ドラッグ機能の実装

#### 2.1 ゲートのドラッグ移動
**問題**: 現在の実装にドラッグ機能が存在しない

**必要なテストケース**:
- [ ] ゲートをドラッグして移動開始できる
- [ ] ドラッグ中のゲートが半透明になる
- [ ] ドラッグ中も接続線が追従する
- [ ] ドロップ時に新しい位置に固定される
- [ ] ドラッグ中のキャンセル（ESCキー）
- [ ] グリッドへのスナップ機能
- [ ] キャンバス境界でのドラッグ制限
- [ ] 他のゲートとの重なり判定

#### 2.2 複数選択とグループ移動
**必要なテストケース**:
- [ ] Ctrl/Cmdキー+クリックで複数選択
- [ ] ドラッグで範囲選択（ラバーバンド）
- [ ] 選択されたゲートのハイライト表示
- [ ] グループ全体の同時移動
- [ ] グループ移動時の相対位置維持

### 3. 接続線（ワイヤー）の操作

#### 3.1 接続線の削除
**問題**: 接続線を個別に削除する機能がない

**必要なテストケース**:
- [ ] 接続線をクリックして選択
- [ ] 選択した接続線をDeleteキーで削除
- [ ] 接続線上の右クリックメニューから削除
- [ ] 接続線のホバー時のハイライト
- [ ] 削除確認ダイアログ（オプション）

#### 3.2 接続線のルーティング
**問題**: 現在は直線のみ（line 291-299）

**必要なテストケース**:
- [ ] 接続線の曲線/折れ線表示オプション
- [ ] 自動ルーティング（障害物回避）
- [ ] 手動での中継点追加
- [ ] 接続線の交差を最小化
- [ ] 接続線のラベル表示

### 4. シミュレーション機能の完全性

#### 4.1 タイミングと遅延
**問題**: 現在は即座に伝播（リアルタイムシミュレーション）

**必要なテストケース**:
- [ ] ゲート遅延の設定と反映
- [ ] 信号伝播のアニメーション表示
- [ ] クロック信号の生成と同期
- [ ] 非同期回路の動作
- [ ] レースコンディションの検出

#### 4.2 特殊ゲート
**必要なテストケース**:
- [ ] XORゲートの実装と動作
- [ ] NANDゲートの実装と動作
- [ ] NORゲートの実装と動作
- [ ] バッファゲートの実装
- [ ] 3ステートバッファの実装
- [ ] D/T/JK/RSフリップフロップ
- [ ] ラッチ回路

### 5. UI/UXの完全性

#### 5.1 ズームとパン
**問題**: 固定サイズのキャンバス（800x600）

**必要なテストケース**:
- [ ] マウスホイールでズームイン/アウト
- [ ] ズーム中心点の制御
- [ ] スペースキー+ドラッグでパン
- [ ] ズームレベルの表示と制限
- [ ] ミニマップの表示
- [ ] フィット to ウィンドウ機能

#### 5.2 コンテキストメニュー
**必要なテストケース**:
- [ ] ゲート上の右クリックメニュー
- [ ] キャンバス上の右クリックメニュー
- [ ] 接続線上の右クリックメニュー
- [ ] メニュー項目の動的有効/無効化
- [ ] ショートカットキーの表示

### 6. データ管理

#### 6.1 コピー&ペースト
**必要なテストケース**:
- [ ] 単一ゲートのコピー&ペースト
- [ ] 複数ゲートと接続のコピー&ペースト
- [ ] 異なるタブ/ウィンドウ間でのペースト
- [ ] ペースト位置のオフセット
- [ ] 循環参照の防止

#### 6.2 インポート/エクスポート
**必要なテストケース**:
- [ ] JSON形式での回路データの保存
- [ ] 保存データの読み込みと復元
- [ ] 部分回路のライブラリ化
- [ ] 画像（PNG/SVG）エクスポート
- [ ] Verilog/VHDLコード生成

### 7. エラー処理とバリデーション

#### 7.1 接続の検証
**必要なテストケース**:
- [ ] 未接続入力の警告表示
- [ ] 複数出力の同一入力への接続エラー
- [ ] 型の不一致（将来の拡張用）
- [ ] 循環依存の検出と警告
- [ ] 組み合わせループの検出

#### 7.2 リソース管理
**必要なテストケース**:
- [ ] 最大ゲート数の制限と警告
- [ ] 最大接続数の制限
- [ ] メモリ使用量の監視
- [ ] 自動保存とリカバリ
- [ ] クラッシュ時のデータ復旧

### 8. 協調作業機能

#### 8.1 共有とコラボレーション
**必要なテストケース**:
- [ ] 回路の共有URL生成
- [ ] 読み取り専用モード
- [ ] リアルタイム共同編集
- [ ] 変更履歴の追跡
- [ ] コメント機能

### 9. 教育機能

#### 9.1 チュートリアルとガイド
**必要なテストケース**:
- [ ] ステップバイステップチュートリアル
- [ ] ツールチップの表示
- [ ] サンプル回路のライブラリ
- [ ] 演習問題モード
- [ ] 自動採点機能

#### 9.2 分析ツール
**必要なテストケース**:
- [ ] 真理値表の自動生成と表示
- [ ] カルノー図の生成
- [ ] 論理式の導出
- [ ] 回路の最適化提案
- [ ] タイミングダイアグラム

### 10. パフォーマンステスト

#### 10.1 スケーラビリティ
**必要なテストケース**:
- [ ] 1000個のゲートでの動作速度
- [ ] 10000本の接続での描画性能
- [ ] 大規模回路でのシミュレーション速度
- [ ] メモリリークの検出
- [ ] 長時間動作の安定性

#### 10.2 レスポンシブ性
**必要なテストケース**:
- [ ] 60FPSでのドラッグ操作
- [ ] 入力変更の即時反映（<16ms）
- [ ] 非同期処理での UI ブロッキング回避
- [ ] プログレッシブレンダリング
- [ ] 仮想化による大規模描画

## 実装優先順位

### Phase 1: 基本機能の修正（必須）
1. AND/ORゲートの複数入力端子
2. ゲートのドラッグ移動
3. 接続線の個別削除
4. 基本的なキーボードショートカット

### Phase 2: コア機能の強化
1. 複数選択と一括操作
2. コピー&ペースト
3. より多くのゲートタイプ
4. ズームとパン

### Phase 3: 高度な機能
1. 自動ルーティング
2. タイミングシミュレーション
3. インポート/エクスポート
4. 共有機能

### Phase 4: 教育・分析機能
1. チュートリアルシステム
2. 真理値表とカルノー図
3. 回路最適化
4. 演習問題