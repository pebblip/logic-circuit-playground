import type { StructuredLesson } from '../../../../types/lesson-content';

export const dFlipFlopStructuredLesson: StructuredLesson = {
  id: 'd-flip-flop',
  title: 'Dãƒ•ãƒªãƒƒãƒ—ãƒ•ãƒ­ãƒƒãƒ— - 1ãƒ“ãƒƒãƒˆãƒ¡ãƒ¢ãƒª',
  description: 'ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜æ†¶ã§ãã‚‹åŸºæœ¬çš„ãªé †åºå›è·¯ã‚’ä½œã‚Šã¾ã™',
  difficulty: 'advanced',
  prerequisites: ['alu-basics'],
  estimatedMinutes: 25,
  steps: [
    {
      id: 'intro',
      instruction: 'ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜æ†¶ã™ã‚‹å›è·¯ã‚’ä½œã‚ã†ï¼',
      content: [
        {
          type: 'text',
          text: 'ã“ã‚Œã¾ã§ã®å›è·¯ã¯å…¥åŠ›ãŒå¤‰ã‚ã‚‹ã¨å‡ºåŠ›ã‚‚ã™ãå¤‰ã‚ã‚Šã¾ã—ãŸã€‚ã§ã‚‚...',
        },
        {
          type: 'heading',
          text: 'ğŸ¤” ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹ã«ã¯ï¼Ÿ',
        },
        {
          type: 'text',
          text: 'ã€Œå‰ã®çŠ¶æ…‹ã‚’è¦šãˆã¦ãŠãã€å›è·¯ãŒå¿…è¦ã§ã™ï¼',
        },
        {
          type: 'note',
          text: 'ã“ã‚ŒãŒé †åºå›è·¯ã®å§‹ã¾ã‚Š - ãƒ¡ãƒ¢ãƒªã®æœ€å°å˜ä½ã§ã™',
        },
      ],
    },
    {
      id: 'concept',
      instruction: 'Dãƒ•ãƒªãƒƒãƒ—ãƒ•ãƒ­ãƒƒãƒ—ã¨ã¯',
      content: [
        {
          type: 'heading',
          text: 'ğŸ“¦ 1ãƒ“ãƒƒãƒˆã®è¨˜æ†¶è£…ç½®',
        },
        {
          type: 'list',
          ordered: false,
          items: [
            'Dï¼ˆDataï¼‰ï¼šè¨˜æ†¶ã—ãŸã„ãƒ‡ãƒ¼ã‚¿',
            'CLKï¼ˆClockï¼‰ï¼šãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã‚€ã‚¿ã‚¤ãƒŸãƒ³ã‚°',
            'Qï¼šè¨˜æ†¶ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆå‡ºåŠ›ï¼‰',
            "Q'ï¼šQã®åè»¢ï¼ˆè£œåŠ©å‡ºåŠ›ï¼‰",
          ],
        },
        {
          type: 'heading',
          text: 'â° ã‚¯ãƒ­ãƒƒã‚¯ã®å½¹å‰²',
        },
        {
          type: 'text',
          text: 'CLKãŒ0â†’1ã«å¤‰ã‚ã‚‹ç¬é–“ï¼ˆç«‹ã¡ä¸ŠãŒã‚Šã‚¨ãƒƒã‚¸ï¼‰ã§Dã®å€¤ã‚’è¨˜æ†¶',
        },
      ],
    },
    {
      id: 'timing-diagram',
      instruction: 'ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãƒãƒ£ãƒ¼ãƒˆã§ç†è§£',
      content: [
        {
          type: 'heading',
          text: 'ğŸ“Š å‹•ä½œã‚¿ã‚¤ãƒŸãƒ³ã‚°',
        },
        {
          type: 'table',
          headers: ['æ™‚åˆ»', 'D', 'CLK', 'Q', 'å‹•ä½œ'],
          rows: [
            ['t1', '1', 'â†‘', '1', 'D=1ã‚’è¨˜æ†¶'],
            ['t2', '0', '0', '1', 'å¤‰åŒ–ãªã—ï¼ˆä¿æŒï¼‰'],
            ['t3', '0', 'â†‘', '0', 'D=0ã‚’è¨˜æ†¶'],
            ['t4', '1', '0', '0', 'å¤‰åŒ–ãªã—ï¼ˆä¿æŒï¼‰'],
          ],
        },
        {
          type: 'note',
          text: 'CLKãŒâ†‘ï¼ˆç«‹ã¡ä¸ŠãŒã‚Šï¼‰ã®æ™‚ã ã‘ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã¿ã¾ã™',
        },
      ],
    },
    {
      id: 'master-slave',
      instruction: 'ãƒã‚¹ã‚¿ãƒ¼ã‚¹ãƒ¬ãƒ¼ãƒ–æ§‹é€ ',
      content: [
        {
          type: 'heading',
          text: 'ğŸ”— 2æ®µæ§‹æˆã®ç†ç”±',
        },
        {
          type: 'text',
          text: 'D-FFã¯å†…éƒ¨ã§2ã¤ã®ãƒ©ãƒƒãƒã‚’ç›´åˆ—ã«æ¥ç¶šã—ã¦ã„ã¾ã™ï¼š',
        },
        {
          type: 'list',
          ordered: false,
          items: [
            'ãƒã‚¹ã‚¿ãƒ¼ãƒ©ãƒƒãƒï¼šCLK=1ã§Dã‚’å–ã‚Šè¾¼ã‚€',
            'ã‚¹ãƒ¬ãƒ¼ãƒ–ãƒ©ãƒƒãƒï¼šCLK=0ã§å€¤ã‚’å‡ºåŠ›ã«ä¼ãˆã‚‹',
            'çµæœï¼šã‚¨ãƒƒã‚¸ãƒˆãƒªã‚¬å‹•ä½œã‚’å®Ÿç¾',
          ],
        },
      ],
    },
    {
      id: 'simplified-design',
      instruction: 'ä»Šå›ä½¿ã†ç‰¹æ®Šã‚²ãƒ¼ãƒˆ',
      content: [
        {
          type: 'text',
          text: 'D-FFã¯è¤‡é›‘ãªã®ã§ã€ã“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ã¯å°‚ç”¨ã‚²ãƒ¼ãƒˆã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚',
        },
        {
          type: 'heading',
          text: 'ğŸ¯ D-FFã‚²ãƒ¼ãƒˆã®ä½¿ã„æ–¹',
        },
        {
          type: 'list',
          ordered: false,
          items: [
            'å·¦å´å…¥åŠ›ï¼šDï¼ˆãƒ‡ãƒ¼ã‚¿ï¼‰ã¨CLKï¼ˆã‚¯ãƒ­ãƒƒã‚¯ï¼‰',
            "å³å´å‡ºåŠ›ï¼šQï¼ˆè¨˜æ†¶å€¤ï¼‰ã¨Q'ï¼ˆåè»¢ï¼‰",
            'CLOCKã‚²ãƒ¼ãƒˆã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨',
          ],
        },
        {
          type: 'note',
          text: 'å®Ÿéš›ã®å›è·¯ã¯ç´„20å€‹ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚¹ã‚¿ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™',
        },
      ],
    },
    {
      id: 'place-clock',
      instruction: 'CLOCKã‚²ãƒ¼ãƒˆã‚’é…ç½®',
      hint: 'ã‚¿ã‚¤ãƒŸãƒ³ã‚°ä¿¡å·ã‚’ç”Ÿæˆ',
      content: [
        {
          type: 'text',
          text: 'è‡ªå‹•çš„ã«0ã¨1ã‚’ç¹°ã‚Šè¿”ã™ç‰¹æ®Šã‚²ãƒ¼ãƒˆã§ã™ã€‚',
        },
      ],
      action: { type: 'place-gate', gateType: 'CLOCK' },
    },
    {
      id: 'place-data-input',
      instruction: 'ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã‚’é…ç½®',
      hint: 'Dï¼ˆè¨˜æ†¶ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ï¼‰ç”¨ã®INPUT',
      content: [],
      action: { type: 'place-gate', gateType: 'INPUT' },
    },
    {
      id: 'place-dff',
      instruction: 'D-FFã‚²ãƒ¼ãƒˆã‚’é…ç½®',
      hint: 'ç‰¹æ®Šã‚²ãƒ¼ãƒˆã‹ã‚‰D-FFã‚’é¸æŠ',
      content: [
        {
          type: 'text',
          text: '1ãƒ“ãƒƒãƒˆãƒ¡ãƒ¢ãƒªã®æœ¬ä½“ã§ã™ã€‚',
        },
      ],
      action: { type: 'place-gate', gateType: 'D-FF' },
    },
    {
      id: 'place-outputs',
      instruction: 'å‡ºåŠ›è¡¨ç¤ºã‚’é…ç½®',
      hint: "Qã¨Q'ç”¨ã®2ã¤ã®OUTPUT",
      content: [
        {
          type: 'text',
          text: "QãŒè¨˜æ†¶å€¤ã€Q'ã¯ãã®åè»¢ã§ã™ã€‚",
        },
      ],
      action: { type: 'place-gate', gateType: 'OUTPUT' },
    },
    {
      id: 'connect-clock',
      instruction: 'é…ç·šï¼šã‚¯ãƒ­ãƒƒã‚¯ä¿¡å·',
      hint: 'CLOCKã‚’D-FFã®CLKå…¥åŠ›ã«æ¥ç¶š',
      content: [],
      action: { type: 'connect-wire' },
    },
    {
      id: 'connect-data',
      instruction: 'é…ç·šï¼šãƒ‡ãƒ¼ã‚¿ä¿¡å·',
      hint: 'INPUTã‚’D-FFã®Då…¥åŠ›ã«æ¥ç¶š',
      content: [],
      action: { type: 'connect-wire' },
    },
    {
      id: 'connect-outputs',
      instruction: 'é…ç·šï¼šå‡ºåŠ›ä¿¡å·',
      hint: "D-FFã®Qã¨Q'ã‚’ãã‚Œãã‚ŒOUTPUTã«æ¥ç¶š",
      content: [],
      action: { type: 'connect-wire' },
    },
    {
      id: 'test-store-1',
      instruction: 'ãƒ†ã‚¹ãƒˆ1ï¼š1ã‚’è¨˜æ†¶',
      content: [
        {
          type: 'text',
          text: 'D=1ã«ã—ã¦ã€CLOCKã®ç«‹ã¡ä¸ŠãŒã‚Šã§Q=1ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª',
        },
        {
          type: 'note',
          text: 'CLOCKãŒ0â†’1ã«ãªã‚‹ç¬é–“ã‚’è¦³å¯Ÿã—ã¦ãã ã•ã„',
        },
      ],
      action: { type: 'toggle-input' },
    },
    {
      id: 'test-hold',
      instruction: 'ãƒ†ã‚¹ãƒˆ2ï¼šå€¤ã®ä¿æŒ',
      content: [
        {
          type: 'text',
          text: 'D=0ã«å¤‰ãˆã¦ã‚‚ã€CLOCKãŒå¤‰åŒ–ã™ã‚‹ã¾ã§Q=1ã®ã¾ã¾',
        },
        {
          type: 'note',
          text: 'ã“ã‚ŒãŒã€Œè¨˜æ†¶ã€ã§ã™ï¼',
        },
      ],
      action: { type: 'toggle-input' },
    },
    {
      id: 'test-store-0',
      instruction: 'ãƒ†ã‚¹ãƒˆ3ï¼š0ã‚’è¨˜æ†¶',
      content: [
        {
          type: 'text',
          text: 'æ¬¡ã®CLOCKç«‹ã¡ä¸ŠãŒã‚Šã§Q=0ã«æ›´æ–°ã•ã‚Œã¾ã™',
        },
      ],
      action: { type: 'toggle-input' },
    },
    {
      id: 'register-intro',
      instruction: 'ã€ç™ºå±•ã€‘ãƒ¬ã‚¸ã‚¹ã‚¿ã¸ã®æ‹¡å¼µ',
      content: [
        {
          type: 'heading',
          text: 'ğŸ—„ï¸ è¤‡æ•°ãƒ“ãƒƒãƒˆã®è¨˜æ†¶',
        },
        {
          type: 'text',
          text: 'D-FFã‚’ä¸¦åˆ—ã«ä¸¦ã¹ã‚‹ã¨...',
        },
        {
          type: 'list',
          ordered: false,
          items: [
            '8å€‹ â†’ 8ãƒ“ãƒƒãƒˆãƒ¬ã‚¸ã‚¹ã‚¿ï¼ˆ1ãƒã‚¤ãƒˆï¼‰',
            '32å€‹ â†’ 32ãƒ“ãƒƒãƒˆãƒ¬ã‚¸ã‚¹ã‚¿ï¼ˆCPUå†…éƒ¨ï¼‰',
            'å…±é€šCLKã§åŒæ™‚ã«å€¤ã‚’æ›´æ–°',
          ],
        },
      ],
    },
    {
      id: 'memory-hierarchy',
      instruction: 'ãƒ¡ãƒ¢ãƒªéšå±¤ã§ã®ä½ç½®',
      content: [
        {
          type: 'heading',
          text: 'ğŸ“Š è¨˜æ†¶è£…ç½®ã®éšå±¤',
        },
        {
          type: 'list',
          ordered: true,
          items: [
            'ãƒ¬ã‚¸ã‚¹ã‚¿ï¼ˆD-FFï¼‰ï¼šæœ€é€Ÿãƒ»æœ€å°',
            'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼šé«˜é€Ÿãƒ»å°å®¹é‡',
            'ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªï¼šä¸­é€Ÿãƒ»ä¸­å®¹é‡',
            'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼šä½é€Ÿãƒ»å¤§å®¹é‡',
          ],
        },
        {
          type: 'note',
          text: 'D-FFã¯æœ€ã‚‚åŸºæœ¬çš„ã§é«˜é€Ÿãªè¨˜æ†¶ç´ å­ã§ã™',
        },
      ],
    },
    {
      id: 'applications',
      instruction: 'ã€å¿œç”¨ã€‘D-FFã®æ´»ç”¨ä¾‹',
      content: [
        {
          type: 'heading',
          text: 'ğŸ’» å®Ÿç”¨ä¾‹',
        },
        {
          type: 'list',
          ordered: false,
          items: [
            'ğŸ–¥ï¸ CPUãƒ¬ã‚¸ã‚¹ã‚¿ï¼šæ¼”ç®—ãƒ‡ãƒ¼ã‚¿ã®ä¸€æ™‚ä¿å­˜',
            'ğŸ® ã‚²ãƒ¼ãƒ æ©Ÿï¼šå‰ãƒ•ãƒ¬ãƒ¼ãƒ ã®çŠ¶æ…‹è¨˜æ†¶',
            'ğŸ“¡ é€šä¿¡ï¼šãƒ‡ãƒ¼ã‚¿ã®åŒæœŸã¨ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°',
            'ğŸµ ãƒ‡ã‚¸ã‚¿ãƒ«ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªï¼šã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ä¿æŒ',
            'ğŸš¦ ä¿¡å·æ©Ÿï¼šçŠ¶æ…‹é·ç§»ã®è¨˜æ†¶',
          ],
        },
      ],
    },
    {
      id: 'edge-vs-level',
      instruction: 'ã‚¨ãƒƒã‚¸ãƒˆãƒªã‚¬ vs ãƒ¬ãƒ™ãƒ«ãƒˆãƒªã‚¬',
      content: [
        {
          type: 'heading',
          text: 'âš¡ ãƒˆãƒªã‚¬æ–¹å¼ã®é•ã„',
        },
        {
          type: 'table',
          headers: ['æ–¹å¼', 'å‹•ä½œ', 'ç‰¹å¾´'],
          rows: [
            [
              'ã‚¨ãƒƒã‚¸ãƒˆãƒªã‚¬ï¼ˆD-FFï¼‰',
              'CLKã®å¤‰åŒ–ã®ç¬é–“ã ã‘åå¿œ',
              'å®‰å®šå‹•ä½œãƒ»ãƒã‚¤ã‚ºã«å¼·ã„',
            ],
            [
              'ãƒ¬ãƒ™ãƒ«ãƒˆãƒªã‚¬ï¼ˆãƒ©ãƒƒãƒï¼‰',
              'CLK=1ã®é–“ãšã£ã¨åå¿œ',
              'å˜ç´”ãªæ§‹é€ ãƒ»ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ³¨æ„',
            ],
          ],
        },
      ],
    },
    {
      id: 'setup-hold-time',
      instruction: 'ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»ãƒ›ãƒ¼ãƒ«ãƒ‰æ™‚é–“',
      content: [
        {
          type: 'heading',
          text: 'â±ï¸ ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¶ç´„',
        },
        {
          type: 'text',
          text: 'å®Ÿéš›ã®D-FFã«ã¯é‡è¦ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ï¼š',
        },
        {
          type: 'list',
          ordered: false,
          items: [
            'ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚é–“ï¼šCLKâ†‘å‰ã«Dã‚’å®‰å®šã•ã›ã‚‹æ™‚é–“',
            'ãƒ›ãƒ¼ãƒ«ãƒ‰æ™‚é–“ï¼šCLKâ†‘å¾Œã‚‚Dã‚’ç¶­æŒã™ã‚‹æ™‚é–“',
            'é•åã™ã‚‹ã¨èª¤å‹•ä½œï¼ˆãƒ¡ã‚¿ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰',
          ],
        },
      ],
    },
    {
      id: 'achievement',
      instruction: 'ğŸ‰ D-FFãƒã‚¹ã‚¿ãƒ¼ï¼',
      content: [
        {
          type: 'heading',
          text: 'ğŸ† ç¿’å¾—ã—ãŸã‚¹ã‚­ãƒ«',
        },
        {
          type: 'list',
          ordered: false,
          items: [
            'âœ… ãƒ‡ãƒ¼ã‚¿è¨˜æ†¶ã®åŸºæœ¬åŸç†',
            'âœ… ã‚¯ãƒ­ãƒƒã‚¯åŒæœŸã®æ¦‚å¿µ',
            'âœ… é †åºå›è·¯ã®ç¬¬ä¸€æ­©',
            'âœ… ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ¡ãƒ¢ãƒªã®åŸºç¤',
          ],
        },
        {
          type: 'note',
          text: 'ã“ã‚Œã§ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒã€Œè¨˜æ†¶ã€ã§ãã‚‹ç†ç”±ãŒã‚ã‹ã‚Šã¾ã—ãŸï¼',
        },
      ],
    },
    {
      id: 'quiz',
      instruction: 'ç†è§£åº¦ãƒã‚§ãƒƒã‚¯ï¼',
      content: [
        {
          type: 'quiz',
          question: 'D-FFãŒãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã‚€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ï¼Ÿ',
          options: [
            'D=1ã®ã¨ã',
            'CLK=1ã®ã¨ã',
            'CLKãŒ0â†’1ã«ãªã‚‹ã¨ã',
            'ã„ã¤ã§ã‚‚',
          ],
          correctIndex: 2,
        },
      ],
    },
  ],
};
