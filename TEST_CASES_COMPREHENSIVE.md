# 論理回路プレイグラウンド - 包括的テストケース設計

## 1. ゲート配置機能

### 1.1 基本的なゲート配置
- [ ] INPUTゲートをキャンバスに配置できる
- [ ] OUTPUTゲートをキャンバスに配置できる
- [ ] ANDゲートをキャンバスに配置できる
- [ ] ORゲートをキャンバスに配置できる
- [ ] NOTゲートをキャンバスに配置できる
- [ ] 配置されたゲートが指定した位置に表示される
- [ ] 配置モードでのみゲートが配置される（接続モードでは配置されない）

### 1.2 ゲートの削除
- [ ] 右クリックでゲートを削除できる
- [ ] ゲートを削除すると関連する接続も削除される
- [ ] 削除操作を元に戻せる（Undo機能）

### 1.3 ゲートのドラッグ移動
- [ ] ゲートをドラッグして移動できる
- [ ] ドラッグ中も接続線が追従する
- [ ] ドラッグ終了後、新しい位置にゲートが固定される
- [ ] 複数ゲートの選択・同時移動ができる

## 2. ワイヤー接続機能

### 2.1 基本的な接続
- [ ] 出力端子から入力端子へワイヤーを接続できる
- [ ] 接続モードでのみワイヤー接続が可能
- [ ] ドラッグ中のワイヤーが視覚的に表示される
- [ ] 接続完了時に実線で表示される

### 2.2 ゲート別の接続制約
#### ANDゲート
- [ ] 2つ以上の入力を接続できる
- [ ] 複数の入力端子が正しく表示される
- [ ] すべての入力がHighの時のみ出力がHighになる

#### ORゲート
- [ ] 2つ以上の入力を接続できる
- [ ] 複数の入力端子が正しく表示される
- [ ] いずれかの入力がHighなら出力がHighになる

#### NOTゲート
- [ ] 1つの入力のみ接続できる
- [ ] 入力を反転して出力する

#### OUTPUTゲート
- [ ] 1つ以上の入力を接続できる
- [ ] 最初の入力の値を表示する

### 2.3 接続の制約
- [ ] 同じゲートの出力から入力への接続は禁止
- [ ] 入力端子から出力端子への逆接続は禁止
- [ ] 循環参照（ループ）の検出と防止
- [ ] 1つの出力から複数の入力への接続が可能（ファンアウト）
- [ ] 1つの入力には1つの出力のみ接続可能

### 2.4 接続の削除
- [ ] 既存の接続線をクリックして削除できる
- [ ] 接続線の上にマウスホバーで削除可能な視覚的フィードバック
- [ ] 削除操作を元に戻せる（Undo機能）

## 3. シミュレーション機能

### 3.1 基本的なシミュレーション
- [ ] INPUTゲートをクリックして値を切り替えられる
- [ ] 値の変更が即座に回路全体に伝播する
- [ ] アクティブな接続線が視覚的に区別される（色の変化）
- [ ] ゲートの状態が視覚的に表示される（色の変化）

### 3.2 複雑な回路のシミュレーション
- [ ] 複数段のゲートを通る信号伝播が正しく計算される
- [ ] フィードバックループがある回路でも安定して動作する
- [ ] 大規模な回路でもパフォーマンスが維持される

### 3.3 エッジケース
- [ ] 未接続の入力を持つゲートの動作（デフォルト値の扱い）
- [ ] 複数の出力が1つの入力に接続された場合のエラー処理
- [ ] 無限ループの検出と防止

## 4. UI/UX機能

### 4.1 モード切り替え
- [ ] 配置モードと接続モードの切り替えがスムーズ
- [ ] 現在のモードが視覚的に明確
- [ ] モードに応じたカーソルの変化
- [ ] モード別の操作ガイドが表示される

### 4.2 視覚的フィードバック
- [ ] ホバー時のハイライト効果
- [ ] ドラッグ可能な要素の視覚的表示
- [ ] 接続可能な端子のハイライト
- [ ] エラー状態の明確な表示

### 4.3 キーボードショートカット
- [ ] Delete/Backspaceキーで選択したゲートを削除
- [ ] Ctrl/Cmd+Zで元に戻す
- [ ] Ctrl/Cmd+Yでやり直す
- [ ] Escキーで現在の操作をキャンセル

## 5. データ永続性

### 5.1 履歴管理
- [ ] すべての操作が履歴に記録される
- [ ] Undo/Redo が正しく動作する
- [ ] 履歴の上限に達した時の適切な処理

### 5.2 保存と読み込み
- [ ] 回路の状態を保存できる
- [ ] 保存した回路を読み込める
- [ ] 不正なデータの読み込み時のエラー処理

## 6. パフォーマンスとスケーラビリティ

### 6.1 大規模回路
- [ ] 100個以上のゲートでも快適に動作
- [ ] 1000本以上の接続でも描画が遅延しない
- [ ] メモリ使用量が適切に管理される

### 6.2 レスポンシブ性
- [ ] ドラッグ操作が60fps以上で動作
- [ ] クリック応答が100ms以内
- [ ] シミュレーション更新が即座に反映

## 7. エラー処理とエッジケース

### 7.1 異常な操作
- [ ] キャンバス外へのゲート配置の防止
- [ ] 重複した位置へのゲート配置の処理
- [ ] 高速な連続クリックの適切な処理

### 7.2 データ整合性
- [ ] ゲートIDの一意性が保証される
- [ ] 接続IDの一意性が保証される
- [ ] 削除されたゲートへの参照が残らない

## 8. アクセシビリティ

### 8.1 キーボード操作
- [ ] Tabキーでゲート間を移動できる
- [ ] Enterキーでゲートを選択/操作できる
- [ ] 矢印キーでゲートを移動できる

### 8.2 スクリーンリーダー対応
- [ ] ゲートの種類と状態が読み上げられる
- [ ] 接続関係が理解できる形で説明される
- [ ] 操作結果のフィードバックが提供される

## 9. 真理値表機能

### 9.1 基本機能
- [ ] 現在の回路の真理値表を自動生成
- [ ] 入力の全組み合わせが表示される
- [ ] 出力値が正しく計算される

### 9.2 インタラクション
- [ ] 真理値表の行をクリックして入力値を設定
- [ ] 真理値表からの入力がキャンバスに反映される

## テスト実装の優先順位

1. **最優先（P0）- 基本機能**
   - ゲートの入出力端子数の正確性（ANDゲートの複数入力など）
   - ワイヤー接続の基本動作
   - ゲートのドラッグ移動
   - シミュレーションの基本動作

2. **高優先度（P1）- コア機能**
   - モード切り替えの動作
   - 接続制約の実装
   - Undo/Redo機能
   - 視覚的フィードバック

3. **中優先度（P2）- 品質向上**
   - エラー処理
   - パフォーマンス
   - キーボードショートカット
   - 真理値表機能

4. **低優先度（P3）- 追加機能**
   - アクセシビリティ
   - 保存/読み込み
   - 高度なシミュレーション機能