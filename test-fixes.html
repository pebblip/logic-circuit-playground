<!DOCTYPE html>
<html>
<head>
    <title>Test Fixes</title>
    <style>
        body { margin: 0; background: #000; }
        #status { position: fixed; top: 10px; right: 10px; color: #0f8; font-family: monospace; background: rgba(0,0,0,0.8); padding: 10px; }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="status">Loading...</div>
    
    <script type="module">
        const status = document.getElementById('status');
        
        // Wait and test
        setTimeout(() => {
            status.textContent = 'Testing...';
            
            // Test 1: INPUT gate
            const inputBtn = Array.from(document.querySelectorAll('button'))
                .find(btn => btn.textContent?.includes('INPUT'));
            
            if (inputBtn) {
                inputBtn.click();
                
                setTimeout(() => {
                    // Check INPUT design
                    const svg = document.querySelector('svg');
                    const gate = svg?.querySelector('g[transform*="translate"]');
                    const rect = gate?.querySelector('rect[rx="15"]');
                    const circle = gate?.querySelector('circle[r="10"]');
                    
                    if (rect && circle) {
                        status.textContent = '✓ INPUT switch design OK';
                    } else {
                        status.textContent = '✗ INPUT switch design NOT OK';
                    }
                    
                    // Test 2: Wire drawing
                    setTimeout(() => {
                        const outputBtn = Array.from(document.querySelectorAll('button'))
                            .find(btn => btn.textContent?.includes('OUTPUT'));
                        
                        if (outputBtn) {
                            outputBtn.click();
                            
                            setTimeout(() => {
                                // Click pin
                                const pin = document.querySelector('circle.pin-hit-area');
                                if (pin) {
                                    pin.dispatchEvent(new MouseEvent('mousedown', { bubbles: true }));
                                    
                                    // Move mouse
                                    setTimeout(() => {
                                        svg.dispatchEvent(new MouseEvent('mousemove', {
                                            bubbles: true,
                                            clientX: 500,
                                            clientY: 300
                                        }));
                                        
                                        // Check for drawing wire
                                        const paths = svg.querySelectorAll('path');
                                        const drawingPath = Array.from(paths).find(p => {
                                            const d = p.getAttribute('d');
                                            const strokeDasharray = p.getAttribute('stroke-dasharray');
                                            return d && (strokeDasharray || p.className.baseVal.includes('animate-pulse'));
                                        });
                                        
                                        if (drawingPath) {
                                            status.textContent += ' | ✓ Wire drawing OK';
                                        } else {
                                            status.textContent += ' | ✗ Wire drawing NOT OK (paths: ' + paths.length + ')';
                                        }
                                    }, 100);
                                }
                            }, 500);
                        }
                    }, 1000);
                }, 500);
            }
        }, 1000);
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
</body>
</html>