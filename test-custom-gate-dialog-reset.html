<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Gate Dialog Reset Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #1a1a1a;
            color: white;
        }
        h1 {
            color: #00ff88;
        }
        .test-steps {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background-color: #3a3a3a;
            border-radius: 4px;
        }
        .step-number {
            color: #00ff88;
            font-weight: bold;
        }
        .expected {
            color: #66ff66;
            margin-top: 5px;
        }
        .issue {
            color: #ff6666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <h1>CreateCustomGateDialog リセット機能テスト</h1>
    
    <div class="test-steps">
        <h2>修正内容</h2>
        <div class="step">
            <span class="step-number">問題:</span>
            <div class="issue">
                カスタムゲート作成ダイアログで保存後、ダイアログを再度開くと前回入力した値が残っている。
            </div>
        </div>
        <div class="step">
            <span class="step-number">修正:</span>
            <ul>
                <li>handleSave関数内で、保存後に全ての状態をリセットするコードを追加</li>
                <li>useEffectフックを追加して、ダイアログが閉じられた時（isOpen === false）に状態をリセット</li>
                <li>これにより、ダイアログが閉じられる方法に関わらず、常に状態がリセットされる</li>
            </ul>
        </div>
    </div>

    <div class="test-steps">
        <h2>テスト手順</h2>
        <div class="step">
            <span class="step-number">ステップ 1:</span>
            アプリケーションを起動し、ツールパレットの「回路→IC」ボタンをクリック
        </div>
        
        <div class="step">
            <span class="step-number">ステップ 2:</span>
            ダイアログに以下を入力：
            <ul>
                <li>ゲート名: TestGate1</li>
                <li>表示名: テストゲート1</li>
                <li>説明: これはテストです</li>
                <li>アイコンを変更（例: ⚙️）</li>
                <li>カテゴリを変更（例: 算術）</li>
            </ul>
        </div>
        
        <div class="step">
            <span class="step-number">ステップ 3:</span>
            「作成」ボタンをクリックして保存
            <div class="expected">期待結果: カスタムゲートが作成され、ダイアログが閉じる</div>
        </div>
        
        <div class="step">
            <span class="step-number">ステップ 4:</span>
            再度「回路→IC」ボタンをクリックしてダイアログを開く
            <div class="expected">期待結果: 全てのフィールドが初期値にリセットされている</div>
            <ul>
                <li>ゲート名: 空</li>
                <li>表示名: 空</li>
                <li>説明: 空</li>
                <li>アイコン: 🔧（デフォルト）</li>
                <li>カテゴリ: カスタム（デフォルト）</li>
                <li>入力ピン: A, B（デフォルト）</li>
                <li>出力ピン: Y（デフォルト）</li>
            </ul>
        </div>
        
        <div class="step">
            <span class="step-number">ステップ 5:</span>
            ダイアログに別の値を入力してから「キャンセル」ボタンをクリック
            <div class="expected">期待結果: ダイアログが閉じる</div>
        </div>
        
        <div class="step">
            <span class="step-number">ステップ 6:</span>
            再度ダイアログを開く
            <div class="expected">期待結果: 全てのフィールドが初期値にリセットされている（キャンセルした内容は保持されていない）</div>
        </div>
    </div>

    <div class="test-steps">
        <h2>追加テスト</h2>
        <div class="step">
            <span class="step-number">テスト 1:</span>
            ダイアログを開いて、×ボタン（右上）でダイアログを閉じる
            <div class="expected">期待結果: 再度開いた時に全てリセットされている</div>
        </div>
        
        <div class="step">
            <span class="step-number">テスト 2:</span>
            入力ピンや出力ピンを追加・削除してから保存し、再度開く
            <div class="expected">期待結果: ピン数もデフォルト（入力2個、出力1個）にリセットされている</div>
        </div>
    </div>
</body>
</html>