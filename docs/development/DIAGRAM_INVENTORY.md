# 学習モード ダイアグラム インベントリ

## 概要
学習モードで使用されているすべての視覚的要素を調査し、Canvas + HTMLハイブリッドアプローチで実装すべきダイアグラムを整理。

## ダイアグラムカテゴリ

### 1. 回路図系（Circuit Diagrams）
Canvas実装が必要なもの：
- **基本ゲート記号**
  - AND, OR, NOT, XOR, NAND, NOR
  - 標準的な記号表現
- **特殊ゲート**
  - D-FF, SR-Latch, Clock
  - 7セグメント表示器
- **複合回路**
  - 半加算器（XOR + AND）
  - 全加算器（半加算器×2 + OR）
  - 4ビット加算器（リップルキャリー）
  - 比較器（1ビット、4ビット）
- **電気回路アナロジー**
  - 直列接続（AND）
  - 並列接続（OR）

### 2. 波形・タイミング系（Waveforms）
Canvas実装が必要なもの：
- **アナログ vs デジタル**
  - 連続波形と離散信号の比較
  - 閾値による変換の視覚化
- **クロック信号**
  - 周期的な矩形波
  - 立ち上がり/立ち下がりエッジ
- **タイミングチャート**
  - D-FFのCLK, D, Q信号
  - 複数信号の同期表示
- **信号伝播**
  - キャリー伝播遅延の視覚化
  - ゲート遅延の表現

### 3. ブロック図系（Block Diagrams）
Canvas実装が検討されるもの：
- **CPU内部構成**
  - レジスタ、ALU、制御部
  - データパスの表示
- **メモリ階層**
  - レジスタ → キャッシュ → メイン → ストレージ
- **パイプライン構造**
  - 各ステージの配置
  - データフロー

### 4. データ表現系（Data Representation）
Canvas実装が有効なもの：
- **ビット配列**
  - 4ビット、8ビットのビジュアル表現
  - 加算の過程（繰り上がり含む）
- **エンコード/デコード**
  - 2進数 → 10進数変換
  - BCD → 7セグメント変換
- **暗号化デモ**
  - XOR演算の視覚化

### 5. 状態・遷移系（State Machines）
Canvas実装が検討されるもの：
- **状態遷移図**
  - 信号機の状態（赤→黄→青）
  - カウンタの状態遷移
- **シーケンス図**
  - シフトレジスタの動作
  - データの流れ

## 実装優先順位

### Phase 1: 基本要素（必須）
1. **基本ゲート記号** - 最も頻繁に使用
2. **アナログ vs デジタル波形** - 基礎概念の理解に重要
3. **クロック信号** - 同期回路の基本
4. **簡単な接続図** - ゲート間の配線

### Phase 2: 応用要素（重要）
1. **タイミングチャート** - D-FF、SR-Latchで使用
2. **複合回路図** - 半加算器、全加算器
3. **ビット配列表示** - 計算過程の可視化
4. **キャリー伝播** - 遅延の概念

### Phase 3: 高度な要素（オプション）
1. **CPU内部ブロック図**
2. **パイプライン構造**
3. **状態遷移図**
4. **複雑なデータフロー**

## 現在のASCIIアートからの移行対象

優先的に置き換えるべきASCIIアート：
1. **電圧レベルとデジタル信号**（digital-basics）
2. **ゲート記号**（and, or, xor）
3. **回路接続図**（各レッスンの完成回路）
4. **電気回路アナロジー**（and, or）
5. **加算器の内部構成**（half-adder, full-adder）

## テーブル系（現状維持）
以下はHTMLテーブルで十分：
- 真理値表
- 状態遷移表
- 変換表（BCD、7セグメント）
- 比較表

## 実装方針

```typescript
// ダイアグラムタイプの定義
type DiagramType = 
  | 'gate-symbol'          // ゲート記号
  | 'circuit-connection'   // 回路接続図
  | 'waveform'            // 波形
  | 'timing-chart'        // タイミングチャート
  | 'block-diagram'       // ブロック図
  | 'bit-array'          // ビット配列
  | 'state-machine';     // 状態遷移図

// Canvas + HTMLハイブリッドコンポーネント
interface DiagramComponent {
  type: DiagramType;
  title: string;          // HTML側
  description?: string;   // HTML側
  canvas: {
    width: number;
    height: number;
    draw: (ctx: CanvasRenderingContext2D) => void;
  };
  labels?: string[];      // HTML側の凡例
  controls?: Control[];   // HTML側のインタラクティブ要素
}
```