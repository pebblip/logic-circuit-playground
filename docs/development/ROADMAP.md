# 🚀 開発ロードマップ

## 🎯 開発方針

### コアコンセプト
1. **動く製品を最優先** - まず基本機能を確実に動作させる
2. **段階的な改善** - 小さなリリースを繰り返す
3. **ユーザーファースト** - 使いやすさを最重視

### 現在の状況
- ✅ 基本的なアーキテクチャは決定（Hybrid Feature-Domain）
- ✅ ドメインモデル（entities）は良い設計で実装済み
- ⚠️ UI/UXに複数の問題あり（要修正）

---

## 📅 フェーズ別開発計画

### 🔧 Phase 0: 基本機能の修正【現在】
**期間**: 1週間（2024年1月第3週）  
**目標**: 基本的な操作を正しく動作させる

#### 優先度：高 🔴
- [ ] **ワンクリック配置**の実装
  - ToolPaletteからワンクリックでゲート配置
  - 適切な位置に自動配置（GatePlacement service）
- [ ] **座標変換の修正**
  - ゲートドラッグ時の座標ずれ問題を解決
  - SVG座標系とビューポート座標系の統一
- [ ] **接続線描画**の修正
  - ピンクリックで接続開始・完了
  - 接続中の視覚的フィードバック

#### 優先度：中 🟡
- [ ] **モバイルスタイル**の適用
  - モックアップのCSSを抽出・適用
  - レスポンシブ対応の改善

**成果物**: 基本操作が正しく動作するアプリケーション

---

### 🏗️ Phase 1: アーキテクチャ整理
**期間**: 1週間（2024年1月第4週）  
**目標**: Hybrid Feature-Domain Architectureへの移行

#### タスク
- [ ] **ディレクトリ構造の整理**
  ```bash
  # domainディレクトリの作成
  mkdir -p src/domain/{services,stores}
  
  # entitiesの移動
  mv src/entities src/domain/entities
  ```

- [ ] **servicesの実装**
  - `GatePlacement.ts` - ゲート配置ロジック
  - `CollisionDetector.ts` - 当たり判定の統一
  - `CircuitSimulator.ts` - シミュレーションロジック

- [ ] **Zustandストアの整理**
  - ViewModelの機能をstoreに統合
  - シンプルな状態管理に

**成果物**: 整理されたコードベース、全テストパス

---

### 🎨 Phase 2: UI/UX改善
**期間**: 1週間（2024年2月第1週）  
**目標**: ユーザー体験の向上

#### タスク
- [ ] **ツールパレットの改善**
  - 視覚的フィードバック追加
  - ツールチップ表示
  
- [ ] **プロパティパネル**
  - 選択中のゲート情報表示
  - 真理値表の表示
  
- [ ] **エラー防止**
  - 無効な接続の防止
  - 視覚的な警告表示

- [ ] **キーボードショートカット**
  - Delete: ゲート削除
  - Ctrl+Z: 元に戻す
  - Ctrl+S: 保存

**成果物**: 使いやすいUI、初心者でも迷わない操作性

---

### 💾 Phase 3: 基本機能の完成
**期間**: 2週間（2024年2月第2-3週）  
**目標**: MVPとしてリリース可能な状態

#### Week 1
- [ ] **保存/読み込み機能**
  - LocalStorageへの保存
  - JSON形式でのエクスポート/インポート
  
- [ ] **追加ゲート実装**
  - XOR, NAND, NOR（src_oldから移植）
  - 適切なテストを追加

#### Week 2
- [ ] **シミュレーション改善**
  - 信号伝播のビジュアライゼーション
  - パフォーマンス最適化
  
- [ ] **基本的なヘルプ**
  - 操作ガイド
  - ゲート説明

**成果物**: 🚀 **v0.5.0 リリース** - 基本的な回路エディタ

---

### 📚 Phase 4: 学習機能
**期間**: 3週間（2024年2月第4週〜3月第2週）  
**目標**: 教育プラットフォームとしての価値追加

#### Week 1: 基盤構築
- [ ] 学習モードの枠組み
- [ ] チュートリアルエンジン
- [ ] 進捗管理システム

#### Week 2-3: コンテンツ作成
- [ ] 基本ゲートのチュートリアル
- [ ] インタラクティブな課題
- [ ] 段階的な難易度設定

**成果物**: 🚀 **v0.7.0 リリース** - 学習機能付き

---

### 🎮 Phase 5: 高度な機能
**期間**: 3週間（2024年3月第3週〜4月第1週）  
**目標**: 完全な機能を持つアプリケーション

- [ ] カスタムゲート作成
- [ ] URL共有機能
- [ ] パズルモード
- [ ] 高度なゲート（フリップフロップ等）

**成果物**: 🚀 **v1.0.0 正式リリース**

---

## 📊 マイルストーン

### 🥉 Milestone 1: "Working Editor"
**Phase 0-1完了時点**（2週間後）
- ✅ 基本的な回路作成が可能
- ✅ 正しく動作するUI
- ✅ 整理されたコードベース

### 🥈 Milestone 2: "Usable Product"  
**Phase 2-3完了時点**（5週間後）
- ✅ 保存/読み込み機能
- ✅ 全基本ゲート実装
- ✅ 初心者にも使いやすいUI

### 🥇 Milestone 3: "Educational Platform"
**Phase 4-5完了時点**（11週間後）
- ✅ 学習モード完備
- ✅ 高度な機能実装
- ✅ プロダクションレディ

---

## 🔄 アジャイル開発プロセス

### 週次サイクル
1. **月曜**: 週の計画とタスク優先順位決定
2. **火-木**: 実装とテスト
3. **金曜**: レビューと次週準備

### 品質チェックポイント
各フェーズ完了時に必須：
```bash
npm run typecheck  # エラー0
npm run test       # 全テストパス
npm run build      # ビルド成功
```

### フィードバックループ
- 各フェーズ後にユーザーテスト
- 問題があれば次のフェーズで対応
- 優先順位は柔軟に調整

---

## 🎯 成功の指標

### 技術的指標
- TypeScriptエラー: 0
- テストカバレッジ: 80%以上
- ビルド時間: 30秒以内
- パフォーマンス: 60fps維持

### ユーザー指標
- 初回操作での成功率: 90%以上
- エラー遭遇率: 5%以下
- 基本タスク完了時間: 5分以内

---

## 📝 注意事項

### やること
- ✅ ユーザーの問題を解決する
- ✅ シンプルで直感的なUI
- ✅ 確実に動作する機能

### やらないこと
- ❌ 過度な最適化
- ❌ 使われない機能の実装
- ❌ 完璧主義による遅延

---

*このロードマップは状況に応じて柔軟に調整されます*  
*最終更新: 2024年1月*