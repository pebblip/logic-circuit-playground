# 🚀 開発ロードマップ

## 🎯 開発方針

### コアコンセプト
1. **動く製品を最優先** - まず基本機能を確実に動作させる
2. **段階的な改善** - 小さなリリースを繰り返す
3. **ユーザーファースト** - 使いやすさを最重視

### 現在の状況
- ✅ **新API移行完了**: Result<T,E>パターンを採用
- ✅ **カスタムゲート機能**: 回路から新しいゲートを作成可能
- ✅ **真理値表表示**: 出力ヘッダーを正しく表示
- ✅ **テスト強化**: 包括的テストスイート（21+ファイル、全テスト成功）
- ✅ **防御的プログラミング**: safeOutputNamesによる堅牢性向上
- ✅ **基本的なアーキテクチャ**: Hybrid Feature-Domain完成
- ✅ **ドメインモデル**: 高品質な設計で実装済み
- ✅ **真理値表自動生成機能**: 実装完了
- ✅ **ゲート説明**: 構造化データ＋JSX形式

---

## 📅 フェーズ別開発計画

### 🔧 Phase 0: 基本機能の修正【完了】✅
**目標**: 基本的な操作を正しく動作させる

#### 優先度：高 🔴
- [x] **ドラッグ&ドロップ配置**の実装
  - ToolPaletteからドラッグ&ドロップでゲート配置
  - ユーザーが意図した位置に正確に配置
- [x] **座標変換の修正**
  - ゲートドラッグ時の座標ずれ問題を解決
  - SVG座標系とビューポート座標系の統一
- [x] **接続線描画**の修正
  - ピンクリックで接続開始・完了
  - 接続中の視覚的フィードバック

#### 優先度：中 🟡
- [x] **モバイルスタイル**の適用
  - モックアップのCSSを抽出・適用
  - レスポンシブ対応の改善

**成果物**: 基本操作が正しく動作するアプリケーション

#### 追加成果
- [x] **ゲート説明の革新**
  - Markdown→構造化データ＋JSXへ移行
  - 豊富な比喩と技術的洞察を追加
- [x] **真理値表自動生成**
  - 組み合わせ回路の真理値表を自動生成
  - カスタムゲートでも対応
- [x] **CLOCKダイアログ問題修正**
  - モーダル開閉時の状態管理を改善
  - isRunning制御による安定化

---

### 🏗️ Phase 1: アーキテクチャ整理【完了】✅
**目標**: Hybrid Feature-Domain Architectureへの移行

#### 完了項目
- ✅ **新API移行**: Result<T,E>パターンで型安全な実装
- ✅ **ドメイン層の整理**: analysis, circuit, simulationに分離
- ✅ **Zustandストアの最適化**: シンプルで効率的な状態管理

---

### 🎨 Phase 2: UI/UX改善【進行中】
**目標**: ユーザー体験の向上

#### 完了項目
- ✅ **プロパティパネル**: ゲート情報と真理値表表示
- ✅ **カスタムゲート作成UI**: 直感的なダイアログ
- ✅ **レスポンシブ対応**: デスクトップ・タブレット・モバイル
  - 無効な接続の防止
  - 視覚的な警告表示

- [ ] **キーボードショートカット**
  - Delete: ゲート削除
  - Ctrl+Z: 元に戻す
  - Ctrl+S: 保存

**成果物**: 使いやすいUI、初心者でも迷わない操作性

---

### 💾 Phase 3: 次期開発予定
**目標**: さらなる機能拡張

#### 検討中の機能
- **高度なシミュレーション**: より詳細な信号解析
- **共有機能**: 回路の共有とコラボレーション
- **学習コンテンツ**: インタラクティブなチュートリアル

---

## 📊 品質基準

### コード品質
```bash
npm run typecheck  # エラー0
npm run test       # 全テストパス
npm run build      # ビルド成功
```

### フィードバックループ
- 各フェーズ後にユーザーテスト
- 問題があれば次のフェーズで対応
- 優先順位は柔軟に調整

---

## 🎯 成功の指標

### 技術的指標
- TypeScriptエラー: 0
- テストカバレッジ: 80%以上
- ビルド時間: 30秒以内
- パフォーマンス: 60fps維持

### ユーザー指標
- 初回操作での成功率: 90%以上
- エラー遭遇率: 5%以下
- 基本タスク完了時間: 5分以内

---

## 📝 注意事項

### やること
- ✅ ユーザーの問題を解決する
- ✅ シンプルで直感的なUI
- ✅ 確実に動作する機能

### やらないこと
- ❌ 過度な最適化
- ❌ 使われない機能の実装
- ❌ 完璧主義による遅延

---

*このロードマップは状況に応じて柔軟に調整されます*

## 📋 重要な方針決定

### ドラッグ&ドロップ配置の採用
- ワンクリック自動配置を廃止
- 理由：自動配置後に結局ドラッグで調整が必要で二度手間
- ユーザーが最初から意図した位置に配置できる方が効率的