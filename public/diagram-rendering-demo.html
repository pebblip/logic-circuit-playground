<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ダイアグラムレンダリング手法の比較デモ</title>
    <style>
        body {
            font-family: -apple-system, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .method {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .demo-area {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        /* 1. SVGによる波形図 */
        .waveform-svg {
            width: 100%;
            height: 200px;
        }
        
        /* 2. HTML/CSSによるタイミングチャート */
        .timing-chart {
            display: grid;
            grid-template-columns: 100px repeat(10, 50px);
            gap: 2px;
            font-size: 14px;
        }
        .timing-signal {
            display: contents;
        }
        .signal-name {
            font-weight: bold;
            padding: 10px;
            background: #e0e0e0;
            display: flex;
            align-items: center;
        }
        .signal-bit {
            padding: 10px;
            text-align: center;
            background: #f0f0f0;
            border: 1px solid #ddd;
        }
        .signal-bit.high {
            background: #4CAF50;
            color: white;
        }
        .signal-bit.low {
            background: #f44336;
            color: white;
        }
        .signal-bit.edge {
            background: linear-gradient(to right, #f44336 50%, #4CAF50 50%);
        }
        
        /* 3. Canvas APIによる波形 */
        #waveformCanvas {
            border: 1px solid #ddd;
            width: 100%;
            height: 200px;
        }
        
        /* 4. CSS Gridによるブロック図 */
        .block-diagram {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 20px;
        }
        .block {
            background: #2196F3;
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 8px;
            position: relative;
        }
        .block::after {
            content: '→';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            color: #666;
        }
        .block:last-child::after {
            display: none;
        }
        
        /* 5. Pure CSSによる状態遷移図 */
        .state-diagram {
            position: relative;
            height: 300px;
            margin: 20px;
        }
        .state {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #FF9800;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .transition {
            position: absolute;
            height: 2px;
            background: #666;
            transform-origin: left center;
        }
        .transition::after {
            content: '▶';
            position: absolute;
            right: -10px;
            top: -8px;
            color: #666;
        }
        
        /* アナログ vs デジタル比較 */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }
        .signal-demo {
            text-align: center;
        }
        .analog-wave {
            width: 100%;
            height: 150px;
        }
        .digital-wave {
            display: flex;
            align-items: center;
            height: 150px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            padding: 20px;
        }
        .digital-bit {
            flex: 1;
            height: 80px;
            margin: 0 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        .digital-bit.high {
            background: #4CAF50;
            align-self: flex-start;
        }
        .digital-bit.low {
            background: #f44336;
            align-self: flex-end;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>学習モード用ダイアグラムレンダリング手法デモ</h1>
        
        <!-- アナログ vs デジタル信号の比較 -->
        <div class="method">
            <h2>アナログ線 vs デジタル線の比較（ご質問の例）</h2>
            <div class="comparison-container">
                <div class="signal-demo">
                    <h3>アナログ信号</h3>
                    <svg class="analog-wave" viewBox="0 0 400 150">
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:0.3" />
                                <stop offset="100%" style="stop-color:#4CAF50;stop-opacity:0.1" />
                            </linearGradient>
                        </defs>
                        <!-- 軸 -->
                        <line x1="20" y1="130" x2="380" y2="130" stroke="#999" stroke-width="2"/>
                        <line x1="20" y1="20" x2="20" y2="130" stroke="#999" stroke-width="2"/>
                        <!-- 波形 -->
                        <path d="M 20 75 Q 100 20, 200 75 T 380 75" 
                              stroke="#4CAF50" stroke-width="3" fill="none"/>
                        <path d="M 20 75 Q 100 20, 200 75 T 380 75 L 380 130 L 20 130 Z" 
                              fill="url(#gradient)" opacity="0.5"/>
                        <!-- ラベル -->
                        <text x="200" y="145" text-anchor="middle" font-size="12" fill="#666">時間 →</text>
                        <text x="10" y="75" text-anchor="middle" font-size="12" fill="#666" transform="rotate(-90, 10, 75)">電圧</text>
                    </svg>
                    <p>連続的に変化する信号</p>
                </div>
                
                <div class="signal-demo">
                    <h3>デジタル信号</h3>
                    <div class="digital-wave">
                        <div class="digital-bit high">1</div>
                        <div class="digital-bit low">0</div>
                        <div class="digital-bit low">0</div>
                        <div class="digital-bit high">1</div>
                        <div class="digital-bit high">1</div>
                        <div class="digital-bit low">0</div>
                        <div class="digital-bit high">1</div>
                        <div class="digital-bit low">0</div>
                    </div>
                    <p>0と1の2値のみ</p>
                </div>
            </div>
        </div>

        <!-- SVGによる波形図 -->
        <div class="method">
            <h2>方法1: SVGによる波形図（推奨）</h2>
            <div class="demo-area">
                <svg class="waveform-svg" viewBox="0 0 800 200">
                    <!-- CLK信号 -->
                    <g transform="translate(0, 30)">
                        <text x="10" y="15" font-size="14" font-weight="bold">CLK</text>
                        <path d="M 100 0 L 100 40 L 150 40 L 150 0 L 200 0 L 200 40 L 250 40 L 250 0 L 300 0 L 300 40 L 350 40 L 350 0 L 400 0" 
                              stroke="#333" stroke-width="2" fill="none"/>
                    </g>
                    
                    <!-- データ信号 -->
                    <g transform="translate(0, 100)">
                        <text x="10" y="15" font-size="14" font-weight="bold">DATA</text>
                        <path d="M 100 40 L 175 40 L 175 0 L 325 0 L 325 40 L 400 40" 
                              stroke="#2196F3" stroke-width="2" fill="none"/>
                    </g>
                    
                    <!-- 出力信号 -->
                    <g transform="translate(0, 170)">
                        <text x="10" y="15" font-size="14" font-weight="bold">OUT</text>
                        <path d="M 100 40 L 150 40 L 150 0 L 300 0 L 300 40 L 400 40" 
                              stroke="#4CAF50" stroke-width="2" fill="none"/>
                    </g>
                </svg>
            </div>
            <p><strong>利点:</strong> 精密な制御、スケーラブル、アニメーション可能</p>
        </div>

        <!-- HTML/CSSによるタイミングチャート -->
        <div class="method">
            <h2>方法2: HTML/CSSによるタイミングチャート</h2>
            <div class="demo-area">
                <div class="timing-chart">
                    <div class="timing-signal">
                        <div class="signal-name">CLK</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                    </div>
                    <div class="timing-signal">
                        <div class="signal-name">D</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit high">1</div>
                    </div>
                    <div class="timing-signal">
                        <div class="signal-name">Q</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit high">1</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit low">0</div>
                        <div class="signal-bit high">1</div>
                    </div>
                </div>
            </div>
            <p><strong>利点:</strong> シンプル、レスポンシブ、アクセシブル</p>
        </div>

        <!-- Canvas APIによる波形 -->
        <div class="method">
            <h2>方法3: Canvas APIによる波形</h2>
            <div class="demo-area">
                <canvas id="waveformCanvas"></canvas>
            </div>
            <p><strong>利点:</strong> 高性能、ピクセル単位の制御、複雑なアニメーション</p>
        </div>

        <!-- CSS Gridによるブロック図 -->
        <div class="method">
            <h2>方法4: CSS Gridによるブロック図</h2>
            <div class="demo-area">
                <div class="block-diagram">
                    <div class="block">入力部</div>
                    <div class="block">デコーダ</div>
                    <div class="block">演算部</div>
                    <div class="block">出力部</div>
                </div>
            </div>
            <p><strong>利点:</strong> レイアウトが簡単、レスポンシブ対応、保守性高</p>
        </div>

        <!-- Pure CSSによる状態遷移図 -->
        <div class="method">
            <h2>方法5: Pure CSSによる状態遷移図</h2>
            <div class="demo-area">
                <div class="state-diagram">
                    <div class="state" style="left: 50px; top: 100px;">初期状態</div>
                    <div class="state" style="left: 300px; top: 50px;">実行中</div>
                    <div class="state" style="left: 300px; top: 200px;">完了</div>
                    
                    <div class="transition" style="left: 170px; top: 120px; width: 140px; transform: rotate(-15deg);"></div>
                    <div class="transition" style="left: 170px; top: 140px; width: 140px; transform: rotate(15deg);"></div>
                    <div class="transition" style="left: 360px; top: 170px; width: 100px; transform: rotate(90deg);"></div>
                </div>
            </div>
            <p><strong>利点:</strong> 軽量、JavaScriptなし、スタイリングが容易</p>
        </div>

        <!-- まとめ -->
        <div class="method">
            <h2>推奨アプローチまとめ</h2>
            <ul>
                <li><strong>回路図:</strong> 既存のCanvasコンポーネント（最高品質）</li>
                <li><strong>波形・タイミング:</strong> SVGまたは専用ライブラリ（WaveDrom）</li>
                <li><strong>比較図（アナログvsデジタル）:</strong> SVG + CSS（視覚的に分かりやすい）</li>
                <li><strong>ブロック図:</strong> CSS GridまたはMermaid.js</li>
                <li><strong>状態遷移図:</strong> SVGまたはMermaid.js</li>
                <li><strong>真理値表:</strong> HTMLテーブル（現状維持）</li>
            </ul>
        </div>
    </div>

    <script>
        // Canvas APIによる波形描画デモ
        const canvas = document.getElementById('waveformCanvas');
        const ctx = canvas.getContext('2d');
        
        // Canvasサイズ設定
        canvas.width = canvas.offsetWidth;
        canvas.height = 200;
        
        // 波形描画
        function drawWaveform() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // グリッド
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            
            // サイン波
            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let x = 0; x < canvas.width; x++) {
                const y = 100 + Math.sin(x * 0.02) * 50;
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // 矩形波
            ctx.strokeStyle = '#4CAF50';
            ctx.beginPath();
            ctx.moveTo(0, 150);
            for (let x = 0; x < canvas.width; x += 100) {
                ctx.lineTo(x, 150);
                ctx.lineTo(x, 50);
                ctx.lineTo(x + 50, 50);
                ctx.lineTo(x + 50, 150);
            }
            ctx.stroke();
        }
        
        drawWaveform();
    </script>
</body>
</html>