<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVG図表カタログ v4.0 - 論理回路プレイグラウンド</title>
  <style>
    :root {
      /* カラーシステム v4 */
      --bg-primary: #0a0a0a;
      --bg-secondary: #1a1a1a;
      --bg-tertiary: #2a2a2a;
      --text-primary: #ffffff;
      --text-secondary: #999999;
      --wire-active: #00ff88;
      --wire-inactive: #555555;
      --gate-fill: #1a1a1a;
      --gate-stroke: #00ff88;
      --gate-stroke-thick: #00ff88;
      --accent-red: #ff6b6b;
      --accent-blue: #4ecdc4;
      --accent-analog: #ff9500;
      --junction-point: #00ff88;
      
      /* デザインシステム v4 - 完全再設計 */
      --grid-unit: 10px;
      --gate-width: 90px;  /* 拡大 */
      --gate-height: 70px; /* 拡大 */
      --wire-width: 4px;   /* 太く */
      --gate-stroke-width: 3px; /* 太く */
      --text-size-label: 16px; /* 大きく */
      --text-size-gate: 18px;  /* 大きく */
      --corner-radius: 6px;
      --connection-penetration: 8px; /* 配線をゲート内部に深く侵入 */
      --junction-size: 6px; /* 分岐点を大きく */
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      padding: 2rem;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 3rem;
      font-size: 2.5rem;
      color: var(--wire-active);
    }

    h2 {
      margin: 3rem 0 1.5rem;
      font-size: 1.8rem;
      color: var(--text-primary);
      border-bottom: 2px solid #333;
      padding-bottom: 0.5rem;
    }

    .section {
      margin-bottom: 4rem;
    }

    .diagram-container {
      background-color: var(--bg-secondary);
      border-radius: 8px;
      padding: 2.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .diagram-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 2rem;
      color: var(--text-primary);
    }

    .diagram-content {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 180px;
      background-color: rgba(42, 42, 42, 0.2);
      border-radius: 6px;
      padding: 1.5rem;
    }

    .circuit-diagram {
      max-width: 100%;
      height: auto;
    }

    .diagram-caption {
      text-align: center;
      color: var(--text-secondary);
      font-size: 1rem;
      margin-top: 1.5rem;
      line-height: 1.5;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      gap: 2.5rem;
      margin-bottom: 3rem;
    }

    .design-principles {
      background-color: rgba(0, 255, 136, 0.1);
      border-left: 4px solid var(--wire-active);
      padding: 2rem;
      margin: 2rem 0;
      border-radius: 6px;
    }

    .design-principles h3 {
      margin-top: 0;
      color: var(--wire-active);
      font-size: 1.2rem;
    }

    .design-principles ul {
      margin-left: 1.5rem;
      margin-top: 0.8rem;
    }

    .design-principles li {
      margin-bottom: 0.8rem;
      line-height: 1.4;
    }

    .problem-analysis {
      background-color: rgba(255, 107, 107, 0.1);
      border-left: 4px solid var(--accent-red);
      padding: 2rem;
      margin: 2rem 0;
      border-radius: 6px;
    }

    .problem-analysis h3 {
      margin-top: 0;
      color: var(--accent-red);
      font-size: 1.2rem;
    }

    /* 真理値表のスタイル */
    .truth-table {
      width: 100%;
      border-collapse: collapse;
      font-family: 'Consolas', 'Monaco', monospace;
      margin: 1rem 0;
    }

    .truth-table th,
    .truth-table td {
      padding: 1rem;
      text-align: center;
      border: 1px solid #444;
    }

    .truth-table th {
      background-color: var(--bg-tertiary);
      font-weight: 600;
    }

    .truth-table td {
      background-color: var(--bg-secondary);
    }

    .truth-table td.active {
      background-color: rgba(0, 255, 136, 0.25);
      color: var(--wire-active);
      font-weight: 600;
    }

    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }
      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>📊 SVG図表カタログ v4.0</h1>
    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 3rem;">
      サイクル2修正版：詳細設計の完全見直し - XOR改良・接続強化・配線最適化
    </p>

    <!-- v3の問題点分析 -->
    <div class="problem-analysis">
      <h3>🔍 v3.0で発見された問題点</h3>
      <ul>
        <li><strong>XORゲートの二重曲線不明確</strong>：左側の補助曲線が薄すぎて識別困難</li>
        <li><strong>配線とゲートの接続感不十分</strong>：「接触」レベルで「浸透」していない</li>
        <li><strong>配線経路の不自然さ</strong>：曲線半径が小さすぎて急カーブ</li>
        <li><strong>ゲート内テキストの窮屈感</strong>：余白不十分でバランス悪い</li>
        <li><strong>全体的なスケール不足</strong>：教材として小さすぎる</li>
      </ul>
    </div>

    <!-- デザイン原則 v4 -->
    <div class="design-principles">
      <h3>🎨 v4.0 詳細設計原則</h3>
      <ul>
        <li><strong>配線浸透接続</strong>：配線をゲート内部に8px深く侵入させて確実な接続感</li>
        <li><strong>XOR二重曲線強調</strong>：左側補助曲線を太く明確に、IEEE標準準拠</li>
        <li><strong>緩やかな配線カーブ</strong>：大きな曲線半径で自然な経路</li>
        <li><strong>大型ゲート設計</strong>：90×70pxに拡大、テキスト余白十分確保</li>
        <li><strong>太い配線・境界線</strong>：4px配線、3px境界で視認性大幅向上</li>
        <li><strong>大型分岐点</strong>：6px径で接続点を明確化</li>
      </ul>
    </div>

    <!-- セクション1: 完全再設計された基本ゲート記号 -->
    <section class="section">
      <h2>1. 基本ゲート記号（v4完全再設計版）</h2>
      <div class="grid">
        <!-- ANDゲート -->
        <div class="diagram-container">
          <div class="diagram-title">ANDゲート</div>
          <div class="diagram-content">
            <svg viewBox="0 0 250 150" class="circuit-diagram">
              <!-- 配線（ゲート内部に深く浸透） -->
              <line x1="20" y1="50" x2="78" y2="50" stroke="#00ff88" stroke-width="4" />
              <line x1="20" y1="100" x2="78" y2="100" stroke="#00ff88" stroke-width="4" />
              <line x1="152" y1="75" x2="200" y2="75" stroke="#00ff88" stroke-width="4" />
              
              <!-- ゲート本体（配線と重複、拡大） -->
              <path d="M 70 40 L 125 40 Q 160 75 125 110 L 70 110 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="3" />
              <text x="115" y="82" text-anchor="middle" fill="#fff" font-size="18" font-weight="600">AND</text>
              
              <!-- ラベル（適切な距離） -->
              <text x="12" y="55" text-anchor="end" fill="#999" font-size="16">A</text>
              <text x="12" y="105" text-anchor="end" fill="#999" font-size="16">B</text>
              <text x="208" y="80" fill="#999" font-size="16">Y</text>
            </svg>
          </div>
          <div class="diagram-caption">両方の入力が1のときのみ出力が1<br>配線がゲート内部に浸透して確実な接続を表現</div>
        </div>

        <!-- ORゲート -->
        <div class="diagram-container">
          <div class="diagram-title">ORゲート</div>
          <div class="diagram-content">
            <svg viewBox="0 0 250 150" class="circuit-diagram">
              <!-- 配線 -->
              <line x1="20" y1="50" x2="78" y2="50" stroke="#00ff88" stroke-width="4" />
              <line x1="20" y1="100" x2="78" y2="100" stroke="#00ff88" stroke-width="4" />
              <line x1="152" y1="75" x2="200" y2="75" stroke="#00ff88" stroke-width="4" />
              
              <!-- ゲート本体 -->
              <path d="M 70 40 Q 90 75 70 110 L 105 110 Q 160 75 105 40 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="3" />
              <text x="115" y="82" text-anchor="middle" fill="#fff" font-size="18" font-weight="600">OR</text>
              
              <!-- ラベル -->
              <text x="12" y="55" text-anchor="end" fill="#999" font-size="16">A</text>
              <text x="12" y="105" text-anchor="end" fill="#999" font-size="16">B</text>
              <text x="208" y="80" fill="#999" font-size="16">Y</text>
            </svg>
          </div>
          <div class="diagram-caption">どちらかの入力が1なら出力が1<br>滑らかな曲線でORの特性を表現</div>
        </div>

        <!-- NOTゲート（大型反転円） -->
        <div class="diagram-container">
          <div class="diagram-title">NOTゲート（インバータ）</div>
          <div class="diagram-content">
            <svg viewBox="0 0 250 150" class="circuit-diagram">
              <!-- 配線 -->
              <line x1="20" y1="75" x2="85" y2="75" stroke="#00ff88" stroke-width="4" />
              <line x1="165" y1="75" x2="200" y2="75" stroke="#00ff88" stroke-width="4" />
              
              <!-- ゲート本体（三角形 + 大型反転円） -->
              <path d="M 80 50 L 130 75 L 80 100 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="3" />
              <circle cx="145" cy="75" r="15" fill="#1a1a1a" stroke="#00ff88" stroke-width="3" />
              
              <!-- ラベル -->
              <text x="12" y="80" text-anchor="end" fill="#999" font-size="16">A</text>
              <text x="208" y="80" fill="#999" font-size="16">Y</text>
            </svg>
          </div>
          <div class="diagram-caption">入力を反転（0→1、1→0）<br>大型反転円で NOT の機能を明確に表現</div>
        </div>

        <!-- XORゲート（明確な二重曲線） -->
        <div class="diagram-container">
          <div class="diagram-title">XORゲート</div>
          <div class="diagram-content">
            <svg viewBox="0 0 250 150" class="circuit-diagram">
              <!-- 配線 -->
              <line x1="20" y1="50" x2="78" y2="50" stroke="#00ff88" stroke-width="4" />
              <line x1="20" y1="100" x2="78" y2="100" stroke="#00ff88" stroke-width="4" />
              <line x1="152" y1="75" x2="200" y2="75" stroke="#00ff88" stroke-width="4" />
              
              <!-- XOR二重曲線（左側補助曲線を太く明確に） -->
              <path d="M 70 40 Q 90 75 70 110" 
                    fill="none" stroke="#00ff88" stroke-width="3" />
              <path d="M 78 40 Q 98 75 78 110 L 105 110 Q 160 75 105 40 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="3" />
              <text x="115" y="82" text-anchor="middle" fill="#fff" font-size="18" font-weight="600">XOR</text>
              
              <!-- ラベル -->
              <text x="12" y="55" text-anchor="end" fill="#999" font-size="16">A</text>
              <text x="12" y="105" text-anchor="end" fill="#999" font-size="16">B</text>
              <text x="208" y="80" fill="#999" font-size="16">Y</text>
            </svg>
          </div>
          <div class="diagram-caption">入力が異なるときのみ出力が1<br>太い二重曲線でXORを明確に識別</div>
        </div>
      </div>
    </section>

    <!-- セクション2: 最適化された複合回路 -->
    <section class="section">
      <h2>2. 複合回路（v4最適化版）</h2>
      
      <div class="diagram-container">
        <div class="diagram-title">半加算器（最適化された配線経路）</div>
        <div class="diagram-content">
          <svg viewBox="0 0 600 320" class="circuit-diagram">
            <!-- 入力ラベル -->
            <text x="25" y="80" fill="#999" font-size="18" font-weight="600">A</text>
            <text x="25" y="240" fill="#999" font-size="18" font-weight="600">B</text>
            
            <!-- 入力配線と緩やかな分岐 -->
            <line x1="50" y1="75" x2="140" y2="75" stroke="#00ff88" stroke-width="4" />
            <path d="M 140 75 Q 160 75 160 95 L 160 130 Q 160 150 180 150" 
                  fill="none" stroke="#00ff88" stroke-width="4" />
            <path d="M 140 75 Q 180 75 220 75" 
                  fill="none" stroke="#00ff88" stroke-width="4" />
            
            <line x1="50" y1="235" x2="170" y2="235" stroke="#00ff88" stroke-width="4" />
            <path d="M 170 235 Q 190 235 190 215 L 190 180 Q 190 160 210 160" 
                  fill="none" stroke="#00ff88" stroke-width="4" />
            <path d="M 170 235 Q 210 235 250 235" 
                  fill="none" stroke="#00ff88" stroke-width="4" />
            
            <!-- 大型分岐点 -->
            <circle cx="140" cy="75" r="6" fill="#00ff88" />
            <circle cx="170" cy="235" r="6" fill="#00ff88" />
            
            <!-- XORゲート（Sum） - 拡大版 -->
            <g transform="translate(220, 110)">
              <path d="M 0 -25 Q 25 25 0 75" fill="none" stroke="#00ff88" stroke-width="3" />
              <path d="M 8 -25 Q 33 25 8 75 L 40 75 Q 100 25 40 -25 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="3" />
              <text x="50" y="32" text-anchor="middle" fill="#fff" font-size="16">XOR</text>
            </g>
            
            <!-- ANDゲート（Carry） - 拡大版 -->
            <g transform="translate(250, 200)">
              <path d="M 0 -25 L 60 -25 Q 100 25 60 75 L 0 75 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="3" />
              <text x="50" y="32" text-anchor="middle" fill="#fff" font-size="16">AND</text>
            </g>
            
            <!-- 出力配線 -->
            <line x1="320" y1="135" x2="480" y2="135" stroke="#00ff88" stroke-width="4" />
            <line x1="350" y1="225" x2="480" y2="225" stroke="#00ff88" stroke-width="4" />
            
            <!-- 出力ラベル（十分な間隔） -->
            <text x="500" y="142" fill="#999" font-size="18">Sum (S)</text>
            <text x="500" y="232" fill="#999" font-size="18">Carry (C)</text>
          </svg>
        </div>
        <div class="diagram-caption">緩やかなカーブと大型分岐点で自然な配線経路を実現<br>拡大されたゲートで詳細まで明確に表現</div>
      </div>
    </section>

    <!-- セクション3: 完成されたアナログ vs デジタル -->
    <section class="section">
      <h2>3. 信号波形（v4完成版）</h2>
      
      <div class="diagram-container">
        <div class="diagram-title">アナログ信号 vs デジタル信号（最終版）</div>
        <div class="diagram-content">
          <svg viewBox="0 0 700 280" class="circuit-diagram">
            <!-- アナログ信号部分 -->
            <text x="60" y="40" fill="#ff9500" font-size="20" font-weight="700">アナログ信号</text>
            
            <!-- アナログ波形軸 -->
            <line x1="60" y1="70" x2="60" y2="160" stroke="#666" stroke-width="2" />
            <line x1="60" y1="160" x2="280" y2="160" stroke="#666" stroke-width="2" />
            
            <!-- アナログ波形（なめらかな正弦波） -->
            <path d="M 70 115 Q 100 85, 130 115 T 190 115 Q 220 145, 250 115 T 270 115" 
                  fill="none" stroke="#ff9500" stroke-width="4" />
            
            <text x="170" y="190" text-anchor="middle" fill="#999" font-size="14">連続的な変化</text>
            <text x="170" y="210" text-anchor="middle" fill="#999" font-size="14">無限の値を取る</text>
            
            <!-- デジタル信号部分 -->
            <text x="420" y="40" fill="#00ff88" font-size="20" font-weight="700">デジタル信号</text>
            
            <!-- デジタル波形軸 -->
            <line x1="420" y1="70" x2="420" y2="160" stroke="#666" stroke-width="2" />
            <line x1="420" y1="160" x2="640" y2="160" stroke="#666" stroke-width="2" />
            
            <!-- デジタル波形（完全な矩形波） -->
            <path d="M 430 160 L 430 80 L 480 80 L 480 160 L 530 160 L 530 80 L 580 80 L 580 160 L 620 160" 
                  fill="none" stroke="#00ff88" stroke-width="4" />
            
            <!-- 0/1ラベル -->
            <text x="405" y="85" text-anchor="end" fill="#fff" font-size="16">1</text>
            <text x="405" y="165" text-anchor="end" fill="#fff" font-size="16">0</text>
            
            <text x="530" y="190" text-anchor="middle" fill="#999" font-size="14">0と1の2値のみ</text>
            <text x="530" y="210" text-anchor="middle" fill="#999" font-size="14">明確な境界</text>
            
            <!-- 比較矢印（太く明確に） -->
            <path d="M 300 115 L 400 115" fill="none" stroke="#4ecdc4" stroke-width="3" 
                  marker-end="url(#bigArrow)" />
            <text x="350" y="100" text-anchor="middle" fill="#4ecdc4" font-size="16" font-weight="600">変換</text>
            
            <!-- マーカー定義 -->
            <defs>
              <marker id="bigArrow" markerWidth="12" markerHeight="12" refX="10" refY="4" 
                      orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,8 L10,4 z" fill="#4ecdc4" />
              </marker>
            </defs>
          </svg>
        </div>
        <div class="diagram-caption">アナログからデジタルへの変換プロセスを分かりやすく表現<br>太い線と大きなテキストで視認性を大幅向上</div>
      </div>
    </section>

    <!-- 改善点まとめ -->
    <div class="design-principles" style="background-color: rgba(78, 205, 196, 0.1); border-color: var(--accent-blue);">
      <h3>✨ v4.0 サイクル2の改善点</h3>
      <ul>
        <li><strong>配線浸透接続</strong>：配線をゲート内部に8px深く侵入させて確実な接続感を演出</li>
        <li><strong>XOR二重曲線強調</strong>：左側補助曲線を3px太さで明確化、IEEE標準準拠</li>
        <li><strong>大型ゲート設計</strong>：90×70pxに拡大してテキスト余白を十分確保</li>
        <li><strong>太い配線・境界線</strong>：4px配線、3px境界で視認性を大幅向上</li>
        <li><strong>緩やかな配線カーブ</strong>：大きな曲線半径で自然で美しい経路</li>
        <li><strong>大型分岐点</strong>：6px径で接続点を明確化</li>
        <li><strong>適切なラベル配置</strong>：16px/18pxフォントで読みやすさ向上</li>
      </ul>
    </div>
  </div>
</body>
</html>