<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVG図表カタログ v3.0 - 論理回路プレイグラウンド</title>
  <style>
    :root {
      /* カラーシステム */
      --bg-primary: #0a0a0a;
      --bg-secondary: #1a1a1a;
      --bg-tertiary: #2a2a2a;
      --text-primary: #ffffff;
      --text-secondary: #888888;
      --wire-active: #00ff88;
      --wire-inactive: #444444;
      --gate-fill: #1a1a1a;
      --gate-stroke: #00ff88;
      --accent-red: #ff6b6b;
      --accent-blue: #4ecdc4;
      --accent-analog: #ff9500;
      
      /* デザインシステム v3 */
      --grid-unit: 10px;
      --gate-width: 80px;
      --gate-height: 60px;
      --wire-width: 3px;
      --gate-stroke-width: 2px;
      --text-size-label: 14px;
      --text-size-gate: 16px;
      --corner-radius: 5px;
      --connection-overlap: 5px; /* 配線をゲートに重ねる */
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      padding: 2rem;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 3rem;
      font-size: 2.5rem;
      color: var(--wire-active);
    }

    h2 {
      margin: 3rem 0 1.5rem;
      font-size: 1.8rem;
      color: var(--text-primary);
      border-bottom: 2px solid #333;
      padding-bottom: 0.5rem;
    }

    .section {
      margin-bottom: 4rem;
    }

    .diagram-container {
      background-color: var(--bg-secondary);
      border-radius: 8px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .diagram-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: var(--text-primary);
    }

    .diagram-content {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 150px;
      background-color: rgba(42, 42, 42, 0.3);
      border-radius: 4px;
      padding: 1rem;
    }

    .circuit-diagram {
      max-width: 100%;
      height: auto;
    }

    .diagram-caption {
      text-align: center;
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-top: 1rem;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .design-principles {
      background-color: rgba(0, 255, 136, 0.1);
      border-left: 4px solid var(--wire-active);
      padding: 1.5rem;
      margin: 2rem 0;
      border-radius: 4px;
    }

    .design-principles h3 {
      margin-top: 0;
      color: var(--wire-active);
    }

    .design-principles ul {
      margin-left: 1.5rem;
      margin-top: 0.5rem;
    }

    .design-principles li {
      margin-bottom: 0.5rem;
    }

    .problem-analysis {
      background-color: rgba(255, 107, 107, 0.1);
      border-left: 4px solid var(--accent-red);
      padding: 1.5rem;
      margin: 2rem 0;
      border-radius: 4px;
    }

    .problem-analysis h3 {
      margin-top: 0;
      color: var(--accent-red);
    }

    /* 真理値表のスタイル */
    .truth-table {
      width: 100%;
      border-collapse: collapse;
      font-family: 'Consolas', 'Monaco', monospace;
      margin: 1rem 0;
    }

    .truth-table th,
    .truth-table td {
      padding: 0.75rem;
      text-align: center;
      border: 1px solid #444;
    }

    .truth-table th {
      background-color: var(--bg-tertiary);
      font-weight: 600;
    }

    .truth-table td {
      background-color: var(--bg-secondary);
    }

    .truth-table td.active {
      background-color: rgba(0, 255, 136, 0.2);
      color: var(--wire-active);
      font-weight: 600;
    }

    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }
      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>📊 SVG図表カタログ v3.0</h1>
    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 3rem;">
      サイクル1修正版：配線接続とアナログ波形の改善
    </p>

    <!-- v2の問題点分析 -->
    <div class="problem-analysis">
      <h3>🔍 v2.0で発見された問題点</h3>
      <ul>
        <li><strong>配線接続の視覚的断絶</strong>：配線がゲートに「接触」するだけで「接続」に見えない</li>
        <li><strong>複合回路の不自然な配線</strong>：直角曲がりのみで機械的、分岐点が不明確</li>
        <li><strong>アナログ波形の削除</strong>：教育価値の重要な要素を削除してしまった</li>
        <li><strong>テキストと図の干渉</strong>：エッジマーカーのラベルが配線と重複</li>
        <li><strong>ゲート形状の不正確さ</strong>：XORの二重曲線、NOTの反転円サイズ</li>
      </ul>
    </div>

    <!-- デザイン原則 v3 -->
    <div class="design-principles">
      <h3>🎨 v3.0 デザイン原則</h3>
      <ul>
        <li><strong>配線重複接続</strong>：配線をゲート内部に5px重ねて確実な接続感</li>
        <li><strong>自然な配線経路</strong>：適度な曲線と明確な分岐点（●印）</li>
        <li><strong>アナログ vs デジタル対比復活</strong>：教育的価値を重視</li>
        <li><strong>干渉しないテキスト配置</strong>：図とテキストの適切な分離</li>
        <li><strong>正確なゲート形状</strong>：IEEE標準に準拠</li>
      </ul>
    </div>

    <!-- セクション1: 改良された基本ゲート記号 -->
    <section class="section">
      <h2>1. 基本ゲート記号（v3改良版）</h2>
      <div class="grid">
        <!-- ANDゲート -->
        <div class="diagram-container">
          <div class="diagram-title">ANDゲート</div>
          <div class="diagram-content">
            <svg viewBox="0 0 220 130" class="circuit-diagram">
              <!-- 配線（ゲートに重複して接続） -->
              <line x1="20" y1="45" x2="65" y2="45" stroke="#00ff88" stroke-width="3" />
              <line x1="20" y1="85" x2="65" y2="85" stroke="#00ff88" stroke-width="3" />
              <line x1="135" y1="65" x2="180" y2="65" stroke="#00ff88" stroke-width="3" />
              
              <!-- ゲート本体（配線と重複） -->
              <path d="M 60 35 L 110 35 Q 140 65 110 95 L 60 95 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="2" />
              <text x="100" y="70" text-anchor="middle" fill="#fff" font-size="16" font-weight="500">AND</text>
              
              <!-- ラベル（図から離して配置） -->
              <text x="15" y="50" text-anchor="end" fill="#888" font-size="14">A</text>
              <text x="15" y="90" text-anchor="end" fill="#888" font-size="14">B</text>
              <text x="185" y="70" fill="#888" font-size="14">Y</text>
            </svg>
          </div>
          <div class="diagram-caption">両方の入力が1のときのみ出力が1</div>
        </div>

        <!-- ORゲート -->
        <div class="diagram-container">
          <div class="diagram-title">ORゲート</div>
          <div class="diagram-content">
            <svg viewBox="0 0 220 130" class="circuit-diagram">
              <!-- 配線 -->
              <line x1="20" y1="45" x2="65" y2="45" stroke="#00ff88" stroke-width="3" />
              <line x1="20" y1="85" x2="65" y2="85" stroke="#00ff88" stroke-width="3" />
              <line x1="135" y1="65" x2="180" y2="65" stroke="#00ff88" stroke-width="3" />
              
              <!-- ゲート本体 -->
              <path d="M 60 35 Q 80 65 60 95 L 90 95 Q 140 65 90 35 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="2" />
              <text x="100" y="70" text-anchor="middle" fill="#fff" font-size="16" font-weight="500">OR</text>
              
              <!-- ラベル -->
              <text x="15" y="50" text-anchor="end" fill="#888" font-size="14">A</text>
              <text x="15" y="90" text-anchor="end" fill="#888" font-size="14">B</text>
              <text x="185" y="70" fill="#888" font-size="14">Y</text>
            </svg>
          </div>
          <div class="diagram-caption">どちらかの入力が1なら出力が1</div>
        </div>

        <!-- NOTゲート（改良版） -->
        <div class="diagram-container">
          <div class="diagram-title">NOTゲート（インバータ）</div>
          <div class="diagram-content">
            <svg viewBox="0 0 220 130" class="circuit-diagram">
              <!-- 配線 -->
              <line x1="20" y1="65" x2="75" y2="65" stroke="#00ff88" stroke-width="3" />
              <line x1="145" y1="65" x2="180" y2="65" stroke="#00ff88" stroke-width="3" />
              
              <!-- ゲート本体（三角形 + より大きな反転円） -->
              <path d="M 70 45 L 120 65 L 70 85 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="2" />
              <circle cx="132" cy="65" r="12" fill="#1a1a1a" stroke="#00ff88" stroke-width="2" />
              
              <!-- ラベル -->
              <text x="15" y="70" text-anchor="end" fill="#888" font-size="14">A</text>
              <text x="185" y="70" fill="#888" font-size="14">Y</text>
            </svg>
          </div>
          <div class="diagram-caption">入力を反転（0→1、1→0）</div>
        </div>

        <!-- XORゲート（改良版） -->
        <div class="diagram-container">
          <div class="diagram-title">XORゲート</div>
          <div class="diagram-content">
            <svg viewBox="0 0 220 130" class="circuit-diagram">
              <!-- 配線 -->
              <line x1="20" y1="45" x2="65" y2="45" stroke="#00ff88" stroke-width="3" />
              <line x1="20" y1="85" x2="65" y2="85" stroke="#00ff88" stroke-width="3" />
              <line x1="135" y1="65" x2="180" y2="65" stroke="#00ff88" stroke-width="3" />
              
              <!-- ゲート本体（明確な二重曲線） -->
              <path d="M 60 35 Q 80 65 60 95" fill="none" stroke="#00ff88" stroke-width="2" />
              <path d="M 65 35 Q 85 65 65 95 L 90 95 Q 140 65 90 35 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="2" />
              <text x="100" y="70" text-anchor="middle" fill="#fff" font-size="16" font-weight="500">XOR</text>
              
              <!-- ラベル -->
              <text x="15" y="50" text-anchor="end" fill="#888" font-size="14">A</text>
              <text x="15" y="90" text-anchor="end" fill="#888" font-size="14">B</text>
              <text x="185" y="70" fill="#888" font-size="14">Y</text>
            </svg>
          </div>
          <div class="diagram-caption">入力が異なるときのみ出力が1</div>
        </div>
      </div>
    </section>

    <!-- セクション2: 改良された複合回路 -->
    <section class="section">
      <h2>2. 複合回路（v3改良版）</h2>
      
      <div class="diagram-container">
        <div class="diagram-title">半加算器（自然な配線経路）</div>
        <div class="diagram-content">
          <svg viewBox="0 0 550 280" class="circuit-diagram">
            <!-- 入力ラベル -->
            <text x="25" y="70" fill="#888" font-size="16" font-weight="500">A</text>
            <text x="25" y="210" fill="#888" font-size="16" font-weight="500">B</text>
            
            <!-- 入力配線と自然な分岐 -->
            <line x1="45" y1="65" x2="120" y2="65" stroke="#00ff88" stroke-width="3" />
            <path d="M 120 65 Q 130 65 130 75 L 130 100 Q 130 110 140 110" 
                  fill="none" stroke="#00ff88" stroke-width="3" />
            <path d="M 120 65 Q 140 65 160 65" 
                  fill="none" stroke="#00ff88" stroke-width="3" />
            
            <line x1="45" y1="205" x2="150" y2="205" stroke="#00ff88" stroke-width="3" />
            <path d="M 150 205 Q 160 205 160 195 L 160 170 Q 160 160 170 160" 
                  fill="none" stroke="#00ff88" stroke-width="3" />
            <path d="M 150 205 Q 170 205 190 205" 
                  fill="none" stroke="#00ff88" stroke-width="3" />
            
            <!-- 分岐点を明確に -->
            <circle cx="120" cy="65" r="4" fill="#00ff88" />
            <circle cx="150" cy="205" r="4" fill="#00ff88" />
            
            <!-- XORゲート（Sum） -->
            <g transform="translate(160, 80)">
              <path d="M 0 -15 Q 20 15 0 45" fill="none" stroke="#00ff88" stroke-width="2" />
              <path d="M 5 -15 Q 25 15 5 45 L 30 45 Q 80 15 30 -15 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="2" />
              <text x="40" y="20" text-anchor="middle" fill="#fff" font-size="14">XOR</text>
            </g>
            
            <!-- ANDゲート（Carry） -->
            <g transform="translate(190, 180)">
              <path d="M 0 -15 L 50 -15 Q 80 15 50 45 L 0 45 Z" 
                    fill="#1a1a1a" stroke="#00ff88" stroke-width="2" />
              <text x="40" y="20" text-anchor="middle" fill="#fff" font-size="14">AND</text>
            </g>
            
            <!-- 出力配線 -->
            <line x1="240" y1="95" x2="420" y2="95" stroke="#00ff88" stroke-width="3" />
            <line x1="270" y1="195" x2="420" y2="195" stroke="#00ff88" stroke-width="3" />
            
            <!-- 出力ラベル（十分な間隔） -->
            <text x="440" y="100" fill="#888" font-size="16">Sum (S)</text>
            <text x="440" y="200" fill="#888" font-size="16">Carry (C)</text>
          </svg>
        </div>
        <div class="diagram-caption">自然な曲線配線と明確な分岐点で接続を表現</div>
      </div>
    </section>

    <!-- セクション3: アナログ vs デジタル対比復活 -->
    <section class="section">
      <h2>3. 信号波形（アナログ vs デジタル対比）</h2>
      
      <div class="diagram-container">
        <div class="diagram-title">アナログ信号 vs デジタル信号</div>
        <div class="diagram-content">
          <svg viewBox="0 0 600 250" class="circuit-diagram">
            <!-- アナログ信号部分 -->
            <text x="50" y="40" fill="#ff9500" font-size="16" font-weight="600">アナログ信号</text>
            
            <!-- アナログ波形軸 -->
            <line x1="50" y1="60" x2="50" y2="140" stroke="#666" stroke-width="1" />
            <line x1="50" y1="140" x2="250" y2="140" stroke="#666" stroke-width="1" />
            
            <!-- アナログ波形（連続的な正弦波） -->
            <path d="M 60 100 Q 80 70, 100 100 T 140 100 Q 160 130, 180 100 T 220 100" 
                  fill="none" stroke="#ff9500" stroke-width="3" />
            
            <text x="150" y="170" text-anchor="middle" fill="#888" font-size="12">連続的な変化</text>
            <text x="150" y="185" text-anchor="middle" fill="#888" font-size="12">無限の値を取る</text>
            
            <!-- デジタル信号部分 -->
            <text x="350" y="40" fill="#00ff88" font-size="16" font-weight="600">デジタル信号</text>
            
            <!-- デジタル波形軸 -->
            <line x1="350" y1="60" x2="350" y2="140" stroke="#666" stroke-width="1" />
            <line x1="350" y1="140" x2="550" y2="140" stroke="#666" stroke-width="1" />
            
            <!-- デジタル波形（完全な矩形波） -->
            <path d="M 360 140 L 360 70 L 410 70 L 410 140 L 460 140 L 460 70 L 510 70 L 510 140 L 540 140" 
                  fill="none" stroke="#00ff88" stroke-width="3" />
            
            <!-- 0/1ラベル -->
            <text x="340" y="75" text-anchor="end" fill="#fff" font-size="12">1</text>
            <text x="340" y="145" text-anchor="end" fill="#fff" font-size="12">0</text>
            
            <text x="450" y="170" text-anchor="middle" fill="#888" font-size="12">0と1の2値のみ</text>
            <text x="450" y="185" text-anchor="middle" fill="#888" font-size="12">明確な境界</text>
            
            <!-- 比較矢印 -->
            <path d="M 270 100 L 330 100" fill="none" stroke="#4ecdc4" stroke-width="2" 
                  marker-end="url(#arrow)" />
            <text x="300" y="90" text-anchor="middle" fill="#4ecdc4" font-size="12">変換</text>
            
            <!-- マーカー定義 -->
            <defs>
              <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" 
                      orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,6 L9,3 z" fill="#4ecdc4" />
              </marker>
            </defs>
          </svg>
        </div>
        <div class="diagram-caption">アナログからデジタルへの変換で情報を2値化</div>
      </div>

      <div class="diagram-container">
        <div class="diagram-title">クロック信号（干渉しないラベル配置）</div>
        <div class="diagram-content">
          <svg viewBox="0 0 600 200" class="circuit-diagram">
            <!-- 背景グリッド（控えめ） -->
            <line x1="80" y1="40" x2="520" y2="40" stroke="#333" stroke-width="1" opacity="0.5" />
            <line x1="80" y1="150" x2="520" y2="150" stroke="#333" stroke-width="1" opacity="0.5" />
            
            <!-- 軸 -->
            <line x1="80" y1="30" x2="80" y2="160" stroke="#fff" stroke-width="2" />
            <line x1="80" y1="150" x2="520" y2="150" stroke="#fff" stroke-width="2" />
            
            <!-- クロック波形 -->
            <path d="M 120 150 L 120 40 L 200 40 L 200 150 L 280 150 L 280 40 L 360 40 L 360 150 L 440 150 L 440 40 L 480 40" 
                  fill="none" stroke="#00ff88" stroke-width="3" />
            
            <!-- 軸ラベル -->
            <text x="70" y="45" fill="#fff" font-size="12">1</text>
            <text x="70" y="155" fill="#fff" font-size="12">0</text>
            <text x="60" y="95" fill="#fff" font-size="14" transform="rotate(-90 60 95)">CLK</text>
            <text x="300" y="175" text-anchor="middle" fill="#888" font-size="12">時間</text>
            
            <!-- 周期表示（図から離れた位置） -->
            <g transform="translate(200, 180)">
              <line x1="-80" y1="0" x2="80" y2="0" stroke="#888" stroke-width="1" 
                    marker-start="url(#arrowLeft)" marker-end="url(#arrowRight)" />
              <text x="0" y="-8" text-anchor="middle" fill="#888" font-size="12">周期 T</text>
            </g>
            
            <!-- エッジマーカー（図から離れた位置） -->
            <circle cx="120" cy="95" r="3" fill="#ff6b6b" />
            <text x="140" y="85" fill="#ff6b6b" font-size="11">立ち上がり</text>
            
            <circle cx="200" cy="95" r="3" fill="#4ecdc4" />
            <text x="220" y="85" fill="#4ecdc4" font-size="11">立ち下がり</text>
            
            <!-- マーカー定義 -->
            <defs>
              <marker id="arrowLeft" markerWidth="8" markerHeight="8" refX="0" refY="2" 
                      orient="auto" markerUnits="strokeWidth">
                <path d="M0,2 L6,0 L6,4 z" fill="#888" />
              </marker>
              <marker id="arrowRight" markerWidth="8" markerHeight="8" refX="6" refY="2" 
                      orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,4 L6,2 z" fill="#888" />
              </marker>
            </defs>
          </svg>
        </div>
        <div class="diagram-caption">テキストとグラフィックを分離して視認性向上</div>
      </div>
    </section>

    <!-- 改善点まとめ -->
    <div class="design-principles" style="background-color: rgba(78, 205, 196, 0.1); border-color: var(--accent-blue);">
      <h3>✨ v3.0 サイクル1の改善点</h3>
      <ul>
        <li><strong>配線重複接続</strong>：配線をゲート境界に5px重ねて確実な接続感を演出</li>
        <li><strong>自然な配線経路</strong>：曲線を使った自然な分岐、分岐点に●印で明確化</li>
        <li><strong>アナログ vs デジタル対比復活</strong>：教育価値を重視してアナログ波形を復活</li>
        <li><strong>干渉しないレイアウト</strong>：テキストと図表を適切に分離</li>
        <li><strong>改良されたゲート形状</strong>：NOTの反転円を大型化、XORの二重曲線を明確化</li>
        <li><strong>視覚的階層の改善</strong>：色の濃淡とコントラストで情報の優先度を明確化</li>
      </ul>
    </div>
  </div>
</body>
</html>