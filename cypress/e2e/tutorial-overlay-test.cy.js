describe('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®å‹•ä½œç¢ºèª', () => {
  beforeEach(() => {
    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å®Œå…¨ã«ã‚¯ãƒªã‚¢
    cy.clearLocalStorage();
    // ãƒ¢ãƒ¼ãƒ‰é¸æŠã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãªã„ã‚ˆã†ã«URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®š
    cy.visit('/?skipMode=false', {
      onBeforeLoad: (win) => {
        win.localStorage.clear();
      }
    });
  });

  it('å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    // ãƒ¢ãƒ¼ãƒ‰é¸æŠç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('è«–ç†å›è·¯ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã¸ã‚ˆã†ã“ãï¼').should('be.visible');
    
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã£ãŸã“ã¨ã‚’ç¢ºèª
    cy.contains('å­¦ç¿’ã‚¬ã‚¤ãƒ‰').should('be.visible');
    cy.contains('å­¦ç¿’çµ±è¨ˆ').should('be.visible');
    
    // ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹').should('be.visible');
  });

  it('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    
    // ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹
    cy.contains('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹').click();
    
    // ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('ğŸ‰ ã‚ˆã†ã“ãè«–ç†å›è·¯ã®ä¸–ç•Œã¸ï¼').should('be.visible');
    cy.contains('ã“ã®ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã¯ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®å¿ƒè‡“éƒ¨ã§ã‚ã‚‹è«–ç†å›è·¯ã‚’æ¥½ã—ãå­¦ã¹ã¾ã™ã€‚').should('be.visible');
    
    // ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('1/10').should('be.visible');
    
    // ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('ã‚¹ã‚­ãƒƒãƒ—').should('be.visible');
    cy.contains('æ¬¡ã¸').should('be.visible');
  });

  it('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ãŒæ©Ÿèƒ½ã™ã‚‹', () => {
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    cy.contains('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹').click();
    
    // ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('ğŸ‰ ã‚ˆã†ã“ãè«–ç†å›è·¯ã®ä¸–ç•Œã¸ï¼').should('be.visible');
    
    // ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    cy.contains('ã‚¹ã‚­ãƒƒãƒ—').click();
    
    // ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒé–‰ã˜ã‚‰ã‚Œã‚‹
    cy.contains('ğŸ‰ ã‚ˆã†ã“ãè«–ç†å›è·¯ã®ä¸–ç•Œã¸ï¼').should('not.exist');
    
    // å…ƒã®ç”»é¢ã«æˆ»ã‚‹
    cy.contains('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹').should('be.visible');
  });

  it('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®æ¬¡ã¸ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨TODOã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    // alertã‚’ã‚¹ã‚¿ãƒ–åŒ–
    cy.on('window:alert', (text) => {
      expect(text).to.include('TODO: ã‚¹ãƒ†ãƒƒãƒ—é€²è¡Œæ©Ÿèƒ½ã¯æœªå®Ÿè£…ã§ã™');
      expect(text).to.include('ç¾åœ¨ã®å®Ÿè£…:');
      expect(text).to.include('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤º âœ…');
      expect(text).to.include('æœªå®Ÿè£…:');
      expect(text).to.include('æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®é·ç§»');
    });
    
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    cy.contains('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹').click();
    
    // æ¬¡ã¸ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    cy.contains('æ¬¡ã¸').click();
  });

  it('ãƒ‡ãƒ¢å›è·¯ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    
    // ãƒ‡ãƒ¢å›è·¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('ğŸ® ãƒ‡ãƒ¢å›è·¯ã‚’è©¦ã—ã¦ã¿ã‚ˆã†').should('be.visible');
    
    // ãƒ‡ãƒ¢å›è·¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('AND ã‚²ãƒ¼ãƒˆã®åŸºæœ¬').should('be.visible');
    cy.contains('OR ã¨ NOT ã®çµ„ã¿åˆã‚ã›').should('be.visible');
    cy.contains('D ãƒ•ãƒªãƒƒãƒ—ãƒ•ãƒ­ãƒƒãƒ—').should('be.visible');
  });

  it('ãƒ‡ãƒ¢å›è·¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨è©³ç´°ãŒå±•é–‹ã•ã‚Œã‚‹', () => {
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    
    // ãƒ‡ãƒ¢å›è·¯ã‚’ã‚¯ãƒªãƒƒã‚¯
    cy.contains('AND ã‚²ãƒ¼ãƒˆã®åŸºæœ¬').click();
    
    // è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('2ã¤ã®å…¥åŠ›ã¨ANDã‚²ãƒ¼ãƒˆã‚’ä½¿ã£ãŸæœ€ã‚‚ç°¡å˜ãªå›è·¯ã§ã™').should('be.visible');
    cy.contains('ã“ã®å›è·¯ã‚’èª­ã¿è¾¼ã‚€').should('be.visible');
  });

  it('ãƒ‡ãƒ¢å›è·¯ã®èª­ã¿è¾¼ã¿ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨TODOã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    // alertã‚’ã‚¹ã‚¿ãƒ–åŒ–
    cy.on('window:alert', (text) => {
      expect(text).to.include('TODO: ãƒ‡ãƒ¢å›è·¯ã®èª­ã¿è¾¼ã¿æ©Ÿèƒ½ã¯æœªå®Ÿè£…ã§ã™');
      expect(text).to.include('èª­ã¿è¾¼ã‚‚ã†ã¨ã—ãŸå›è·¯: AND ã‚²ãƒ¼ãƒˆã®åŸºæœ¬');
      expect(text).to.include('ç¾åœ¨ã®å®Ÿè£…:');
      expect(text).to.include('ãƒ‡ãƒ¢å›è·¯ã®ä¸€è¦§è¡¨ç¤º âœ…');
    });
    
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    
    // ãƒ‡ãƒ¢å›è·¯ã‚’å±•é–‹
    cy.contains('AND ã‚²ãƒ¼ãƒˆã®åŸºæœ¬').click();
    
    // èª­ã¿è¾¼ã¿ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    cy.contains('ã“ã®å›è·¯ã‚’èª­ã¿è¾¼ã‚€').click();
  });

  it('å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã®ãƒ¬ãƒƒã‚¹ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨TODOã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    // alertã‚’ã‚¹ã‚¿ãƒ–åŒ–
    cy.on('window:alert', (text) => {
      expect(text).to.include('TODO: ãƒ¬ãƒƒã‚¹ãƒ³åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ã¯æœªå®Ÿè£…ã§ã™');
      expect(text).to.include('é¸æŠã•ã‚ŒãŸãƒ¬ãƒƒã‚¹ãƒ³: ãƒ¬ãƒƒã‚¹ãƒ³1');
      expect(text).to.include('ç¾åœ¨ã®å®Ÿè£…:');
      expect(text).to.include('ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§ã®è¡¨ç¤º âœ…');
    });
    
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    
    // ãƒ¬ãƒƒã‚¹ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    cy.contains('ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã®åŸºæœ¬æ“ä½œ').click();
  });

  it('ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒæ©Ÿèƒ½ã™ã‚‹', () => {
    // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹
    cy.contains('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰').click();
    cy.contains('é¸æŠã™ã‚‹').click();
    
    // åˆæœŸçŠ¶æ…‹ã§ã¯å…¨ã¦ã®ãƒ‡ãƒ¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('AND ã‚²ãƒ¼ãƒˆã®åŸºæœ¬').should('be.visible');
    cy.contains('OR ã¨ NOT ã®çµ„ã¿åˆã‚ã›').should('be.visible');
    cy.contains('D ãƒ•ãƒªãƒƒãƒ—ãƒ•ãƒ­ãƒƒãƒ—').should('be.visible');
    
    // åŸºæœ¬ã‚¿ã‚°ã‚’ã‚¯ãƒªãƒƒã‚¯
    cy.contains('button', 'åŸºæœ¬').click();
    
    // åŸºæœ¬ã‚¿ã‚°ã®ãƒ‡ãƒ¢ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('AND ã‚²ãƒ¼ãƒˆã®åŸºæœ¬').should('be.visible');
    cy.contains('OR ã¨ NOT ã®çµ„ã¿åˆã‚ã›').should('be.visible');
    cy.contains('D ãƒ•ãƒªãƒƒãƒ—ãƒ•ãƒ­ãƒƒãƒ—').should('not.exist');
    
    // ãƒ¡ãƒ¢ãƒªã‚¿ã‚°ã‚’ã‚¯ãƒªãƒƒã‚¯
    cy.contains('button', 'ãƒ¡ãƒ¢ãƒª').click();
    
    // ãƒ¡ãƒ¢ãƒªã‚¿ã‚°ã®ãƒ‡ãƒ¢ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹
    cy.contains('AND ã‚²ãƒ¼ãƒˆã®åŸºæœ¬').should('not.exist');
    cy.contains('OR ã¨ NOT ã®çµ„ã¿åˆã‚ã›').should('not.exist');
    cy.contains('D ãƒ•ãƒªãƒƒãƒ—ãƒ•ãƒ­ãƒƒãƒ—').should('be.visible');
  });
});